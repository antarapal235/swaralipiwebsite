if (self.CavalryLogger) { CavalryLogger.start_js(["\/CXPJb2"]); }

__d("cometComposerValidateNoMediaCurrentlyUploading",["fbt"],(function(a,b,c,d,e,f,g,h){"use strict";var i=["NEW","QUEUED","UPLOADING"];function a(a){return(a.mediaAttachments||[]).some(function(a){return i.includes(a.state)})?h._("You can't post while media is uploading"):null}g["default"]=a}),98);
__d("useComposerSubmit",["fbt","CometRelay","VideoUploadComposerSurface","VideoUploadSurface","cometUniqueID","feedEditStoryLiveInsertUpdater","generateOptimisticResponse","getComposerLoggingPayload","ifRequireable","qex","react","requireDeferred","transformComposerViewStateToCreationData","transformComposerViewStateToMutationData","transformersArrayHelpers","useNotificationsTrackingString","useTriggerAccessibilityAlert"],(function(a,b,c,d,e,f,g,h){"use strict";var i=d("react").useCallback,j=c("requireDeferred")("ComposerStoryCreateMutation").__setRef("useComposerSubmit"),k=c("requireDeferred")("ComposerStoryEditMutation").__setRef("useComposerSubmit"),l=c("qex")._("1221850")===!0;function a(a){var b=a.actorID,e=a.creationSessionID,f=d("CometRelay").useRelayEnvironment(),g=c("useTriggerAccessibilityAlert")(),m=i(function(b){d("VideoUploadComposerSurface").onSubmitPostError(b.creationSessionID,d("VideoUploadSurface").VideoUploadSurfaceIDs.FEED);return function(c){a.onError(c,b)}},[a]),n=i(function(b){var c;d("VideoUploadComposerSurface").onSubmitPostCompleted(b.creationSessionID,d("VideoUploadSurface").VideoUploadSurfaceIDs.FEED);c=(c=b.audience)==null?void 0:(c=c.privacy)==null?void 0:c.base_state;c===null||c===void 0?g(h._("Your Post is successfully shared")):g(h._("Your Post is successfully shared with{audience}",[h._param("audience",c)]));return function(c){a.onCompleted(c,b)}},[a,g]),o=c("useNotificationsTrackingString")(),p=i(function(i,p){var q=i.storyID;if(q!=null)c("transformComposerViewStateToMutationData")(a.unalteredBeginningViewState||null,i,d("transformersArrayHelpers").transformersArrayToMutationDataTransformers(a.transformers),{story_id:q},function(b){b.logging={composer_session_id:e},b.tracking=b.tracking?b.tracking.concat(o):[o],k.onReady(function(d){d=d.commit;d(f,b,{onCompleted:n(i),onError:m(i),updater:function(a){c("feedEditStoryLiveInsertUpdater")(q,a)},variables:{feedLocation:a.variables.feedLocation,renderLocation:a.variables.renderLocation}})})});else{var r=null,s=c("cometUniqueID")();if(a.composerType==="goodwill_campaign"){var t;t=((t=i.linkAttachment)==null?void 0:t.storyId)!=null?"THROWBACK_POST":"NOT_THROWBACK_POST";var u=i.goodwillCometMetadata;r={goodwill_comet_metadata:u,is_throwback_post:t}}var v=null;u=a.optimisticTransformers;var w=null;c("ifRequireable")("ComposerMediaFileUploader",function(a){w=a.getInstance(b),d("VideoUploadComposerSurface").onSubmitPost(i.creationSessionID,d("VideoUploadSurface").VideoUploadSurfaceIDs.FEED)});var x=function(b){var c=new Error();b.error!=null&&(c.description=h._("Something went wrong. Please try again. You may want to check your connection and file sizes.").toString());a&&a.onError(c,i);v&&v.dispose()},y={payload:d("getComposerLoggingPayload").getFeedComposerLoggingPayload(i)};l&&u&&c("transformComposerViewStateToCreationData")(i,p,d("transformersArrayHelpers").transformersArrayToCreationDataTransformers(u),babelHelpers["extends"]({composer_entry_point:a.composerEntryPoint,composer_source_surface:a.composerSourceSurface,composer_type:a.composerType,idempotence_token:a.creationSessionID+"_"+a.requestType,source:"WWW"},r),function(d){d.logging={composer_session_id:e},d.tracking=d.tracking?d.tracking.concat(o):[o],j.onReady(function(g){g=g.commitOptimistic;w&&w.errorObserver.subscribe(x);v=g(f,d,{optimisticResponse:c("generateOptimisticResponse")(b,d,i,e),optimisticUpdater:function(b){return a.optimisticUpdater&&a.optimisticUpdater(b,s)},variables:a.variables},y)})});c("transformComposerViewStateToCreationData")(i,p,d("transformersArrayHelpers").transformersArrayToCreationDataTransformers(a.transformers),babelHelpers["extends"]({composer_entry_point:a.composerEntryPoint,composer_source_surface:a.composerSourceSurface,composer_type:a.composerType,idempotence_token:a.creationSessionID+"_"+a.requestType,source:"WWW"},r),function(k){a.mutationDataValidator&&a.mutationDataValidator(k),k.logging={composer_session_id:e},k.tracking=k.tracking?k.tracking.concat(o):[o],j.onReady(function(j){j=j.commit;l?j(f,k,{onCompleted:function(b){v&&v.dispose();a&&a.onCompleted(b,i);w&&w.errorObserver.unsubscribe(x);d("VideoUploadComposerSurface").onSubmitPostCompleted(i.creationSessionID,d("VideoUploadSurface").VideoUploadSurfaceIDs.FEED);b=(b=i.audience)==null?void 0:(b=b.privacy)==null?void 0:b.base_state;b===null||b===void 0?g(h._("Your Post is successfully shared")):g(h._("Your Post is successfully shared with{audience}",[h._param("audience",b)]))},onError:function(b){a&&a.onError(b,i),v&&v.dispose(),w&&w.errorObserver.unsubscribe(x),d("VideoUploadComposerSurface").onSubmitPostError(i.creationSessionID,d("VideoUploadSurface").VideoUploadSurfaceIDs.FEED)},updater:function(b){a.updater(b,s)},variables:a.variables},y):j(f,k,{onCompleted:n(i),onError:m(i),optimisticResponse:c("generateOptimisticResponse")(b,k,i,e),optimisticUpdater:a.optimisticUpdater,updater:a.updater,variables:a.variables},y)})})}},[a,f,n,m,b,g]);return p}g["default"]=a}),98);
__d("doWithDockedFeedUnitRecords",[],(function(a,b,c,d,e,f){"use strict";function a(a,b){a=a.getRoot();if(a==null)return;a=a.getLinkedRecord("viewer");if(a==null)return;var c=a.getLinkedRecords("docked_feed_units");c==null&&(c=[]);b(a,c.filter(Boolean))}f["default"]=a}),66);
__d("getMatcherFunctionForDockedFeedUnitWithId",[],(function(a,b,c,d,e,f){"use strict";function a(a){return function(b){b=b==null?void 0:b.getLinkedRecord("feed_unit");return(b==null?void 0:b.getValue("__typename"))==="Story"&&(b==null?void 0:b.getValue("id"))===a}}f["default"]=a}),66);
__d("dockFeedUnit",["doWithDockedFeedUnitRecords","getMatcherFunctionForDockedFeedUnitWithId"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b,d){c("doWithDockedFeedUnitRecords")(b,function(e,f){var g,h=f.some(c("getMatcherFunctionForDockedFeedUnitWithId")(a));if(h)return;h=e.getOrCreateLinkedRecord("docked_feed_unit:"+a,"DockedFeedUnit").setValue(d,"visibility");g=(g=b.get(a))!=null?g:b.create(a,"Story").setValue(a,"id");g.setValue(!0,"is_docked");h.setLinkedRecord(g,"feed_unit");e.setLinkedRecords([].concat(f,[h]),"docked_feed_units")})}g["default"]=a}),98);