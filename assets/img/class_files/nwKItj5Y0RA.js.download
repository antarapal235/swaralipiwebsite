if (self.CavalryLogger) { CavalryLogger.start_js(["1xrsGuo"]); }

__d("useCometOutlineDragAndDrop",["react"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react").useEffect;function a(a,b){var c=b.onDragEnter,d=b.onDragLeave,e=b.onDragOver,f=b.onDrop,g=b.onPaste;h(function(){return a.addListener("root",function(a,b){b!=null&&(c&&b.removeEventListener("dragenter",c),d&&b.removeEventListener("dragleave",d),e&&b.removeEventListener("dragover",e),f&&b.removeEventListener("drop",f,!0),g&&b.removeEventListener("paste",g,!0)),a!==null&&(c&&a.addEventListener("dragenter",c),d&&a.addEventListener("dragleave",d),e&&a.addEventListener("dragover",e),f&&a.addEventListener("drop",f,!0),g&&a.addEventListener("paste",g,!0))})},[a,c,d,e,f,g])}g["default"]=a}),98);
__d("useCometOutlineFileDragAndDrop",["react","useCometOutlineDragAndDrop"],(function(a,b,c,d,e,f,g){"use strict";b=d("react");var h=b.useCallback,i=b.useRef;function a(a){var b=a.editor,d=a.isMimeTypeAcceptable,e=a.onHover,f=e===void 0?function(){}:e;e=a.onSubmit;var g=e===void 0?function(){}:e,j=i(0),k=h(function(a){return Array.from(a).filter(d)},[d]);a=h(function(a){j.current++;var b=a.dataTransfer;if(b==null)return f([],!0);b=k(b.items);b.length>0&&a.preventDefault();return f(b,!0)},[k,f]);e=h(function(a){j.current--;if(j.current===0)return f([],!1)},[f]);var l=h(function(a){var b=a.dataTransfer;if(b==null)return f([],!0);b=k(b.items);b.length>0&&a.preventDefault();return f(b,!0)},[k,f]),m=h(function(a,b){b=k(b.items);b=b.map(function(a){return a.getAsFile()}).filter(Boolean);if(b.length>0){a.stopPropagation();a.preventDefault();return g(b)}else return g([])},[k,g]),n=h(function(a){var b=a.dataTransfer;j.current=0;f([],!1);if(b!=null)return m(a,b);else return g([])},[m,f,g]),o=h(function(a){var b=a.clipboardData;return b==null?g([]):m(a,b)},[m,g]);c("useCometOutlineDragAndDrop")(b,{onDragEnter:a,onDragLeave:e,onDragOver:l,onDrop:n,onPaste:o})}g["default"]=a}),98);
__d("useCometOutlineEmptyListeners",["react"],(function(a,b,c,d,e,f,g){"use strict";c=d("react");var h=c.useCallback,i=c.useEffect,j=c.useMemo,k=c.useRef,l=c.useState;function a(a){var b=l(!1),c=b[0],d=b[1];i(function(){return a(function(a){return d(a)})},[a]);return c}function b(a){var b=j(function(){return new Set()},[]),c=k(!1),d=k(!1),e=h(function(a){var c=Array.from(b);for(var d=0;d<c.length;d++)c[d](a)},[b]),f=h(function(){var b=a.getTextContent();b=b===""&&!d.current;c.current!==b&&(c.current=b,e(b))},[a,e]);i(f,[f]);i(function(){return a.addListener("update",f)},[a,f]);i(function(){var b=function(){d.current=!0,f()},c=function(){d.current=!1,f()};return a.addListener("root",function(a,d){d!=null&&(d.removeEventListener("compositionstart",b),d.removeEventListener("compositionend",c)),a!==null&&(a.addEventListener("compositionstart",b),a.addEventListener("compositionend",c))})},[f,a]);return h(function(a){b.add(a);a(c.current);return function(){b["delete"](a)}},[b])}g.useCometOutlineIsEmpty=a;g.useCometOutlineEmptyListeners=b}),98);
__d("CometUFIOutlineDelightNode",["CometOutlineEntityTextNode"],(function(a,b,c,d,e,f,g){"use strict";var h=function(b){babelHelpers.inheritsLoose(a,b);function a(a,c,d,e,f){a=b.call(this,a,f)||this;a.__ufiType="TextDelightCampaign";a.__type="delight";a.__styles=c;a.__campaignID=d;a.__delightAsset=e;return a}a.deserialize=function(b){return new a(b.__text,b.__styles,b.__campaignID,b.__delightAsset)};var c=a.prototype;c.clone=function(){return new a(this.__text,this.__styles,this.__campaignID,this.__delightAsset,this.__key)};c.createDOM=function(a){a=b.prototype.createDOM.call(this,a);var c=this.__delightAsset.id,d=this.__styles,e=d.color;d=d["font-weight"];c!=null&&a.setAttribute("data-delight-asset",c);a.setAttribute("data-delight","true");e!=null&&d!=null&&(a.style.color=e,a.style.fontWeight=d);return a};c.getUFIComposerEntity=function(a){return{__UFI__:!0,id:this.__campaignID,isWeak:!1,type:this.__ufiType}};return a}(c("CometOutlineEntityTextNode"));function a(a,b,c,d){return new h(a,b,c,d).makeSegmented()}g.CometUFIOutlineDelightNode=h;g.createCometUFIOutlineDelightNode=a}),98);
__d("CometUFIComposerInnerForOutline.react",["cr:11238","react"],(function(a,b,c,d,e,f,g){"use strict";d("react"),g["default"]=b("cr:11238")}),98);
__d("createCometUFIAssociateReplyWithParentComposerPluginForOutline",["useLayoutEffect_SAFE_FOR_SSR"],(function(a,b,c,d,e,f,g){"use strict";function h(a){a=a.pluginProps;var b=a.addCommandListener,d=a.setComposerState;c("useLayoutEffect_SAFE_FOR_SSR")(function(){b(function(a){if(a.__type==="SetReplyAssociation"){var b=a.commentAssociatedWithReply;d(function(){return{commentAssociatedWithReply:b}});return"handled"}return"not-handled"})},[b,d]);return null}function a(){return{above:null,action:null,below:h,id:"associate_reply",inside:null,props:{}}}g["default"]=a}),98);
__d("createCometUFIDelightsComposerPluginForOutline",["CometPlaceholder.react","CometRelay","CometTextDelightAnimation.entrypoint","CometTextDelightConfig","CometUFIOutlineDelightNode","Outline","ReactDOMComet","getCampaignRegex","react"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react");b=d("react");var i=b.useCallback,j=b.useEffect,k=b.useMemo,l=b.useState;function m(a){return/[\s\d.,\\\/!$%\^&\*;:{}=\-`~()]/.test(a)}function n(a){return a instanceof d("CometUFIOutlineDelightNode").CometUFIOutlineDelightNode}function o(a){var b=d("Outline").createTextNode(a.getTextContent());a.replace(b)}function p(a,b){var e=a.getTextContent();if(!a.isSimpleText()){var f=a.getPreviousSibling();n(f)&&o(f);f=a.getNextSibling();n(f)&&o(f);return}else if(e.length===0){f=a.getPreviousSibling();var g=a.getNextSibling();d("Outline").isTextNode(f)&&!f.isSimpleText()&&n(g)&&o(g);d("Outline").isTextNode(g)&&!g.isSimpleText()&&n(f)&&o(f);return}g=b.getSelection();if(!m(e[0])){f=a.getPreviousSibling();n(f)&&o(f)}b=a;f=void 0;a=0;for(var h in c("CometTextDelightConfig").campaigns){var i=c("CometTextDelightConfig").campaigns[h],j=c("getCampaignRegex")(i),k=i.id,l=i.styles;k=c("CometTextDelightConfig").campaigns[k].delight_asset;if(k==null)continue;var p;while((p=j.exec(e.substr(a)))!==null){if(p===null)break;var q=p[1],r=p.index+q.length;p=r+p[2].length;var s=f;a+=p;if(q!==""&&!m(q[q.length-1]))continue;if(r===0){q=b.getPreviousSibling();if(d("Outline").isTextNode(q))continue;q=b.splitText(p);f=q[0];b=q[1]}else{q=b.splitText(r,p);f=q[1];b=q[2]}if(b){r=b.getTextContent();if(r.length>0&&!m(r[0])){f=s;continue}}p=f.getTextContent();q=d("CometUFIOutlineDelightNode").createCometUFIOutlineDelightNode(p,l,i.id,k);f.replace(q);f=q}}g!==null&&(!g.anchor.getNode().isAttached()||!g.focus.getNode().isAttached())&&(f!==void 0?f.selectNext(0,0):b!==void 0&&b.select(0,0))}function q(a){a=a.pluginProps;var b=a.editor,e=d("CometRelay").useRelayEnvironment();a=k(function(){return{getEnvironment:function(){return e}}},[e]);a=d("CometRelay").useEntryPointLoader(a,c("CometTextDelightAnimation.entrypoint"));var f=a[0],g=a[1];a=l(!1);var m=a[0],n=a[1];j(function(){b.registerNodeType("delight",d("CometUFIOutlineDelightNode").CometUFIOutlineDelightNode);return b.addTextNodeTransform(p)},[b]);var o=i(function(a){a=a.target;var b=a instanceof Element?a.getAttribute("data-delight-asset"):null;b!=null&&!m&&d("ReactDOMComet").unstable_batchedUpdates(function(){g({id:b}),n(!0)})},[m,g]);j(function(){return b.addListener("root",function(a,b){b!==null&&b.removeEventListener("click",o),a!==null&&a.addEventListener("click",o)})},[o,b]);return h.jsx(c("CometPlaceholder.react"),{fallback:null,children:m&&f!=null&&h.jsx(d("CometRelay").EntryPointContainer,{entryPointReference:f,props:{onRepeatEnd:function(){n(!1)}}})})}q.displayName=q.name+" [from "+f.id+"]";function a(){return{above:null,action:null,below:q,id:"delights",inside:null,props:{}}}g["default"]=a}),98);
__d("CometUFIInsertEmojiComposerActionForOutline.react",["fbt","ix","CometPopoverLoadingState.react","CometUFILazyPopoverComposerAction.react","JSResourceForInteraction","fbicon","react"],(function(a,b,c,d,e,f,g,h,i){"use strict";var j=d("react"),k=d("react").useMemo,l=c("JSResourceForInteraction")("CometUFIEmojiPickerPopoverForOutline.react").__setRef("CometUFIInsertEmojiComposerActionForOutline.react"),m={popoverFallback:{minHeight:"k1c241ex"}};function a(a){var b=a.pluginProps;a=k(function(){return{pluginProps:b}},[b]);return j.jsx(c("CometUFILazyPopoverComposerAction.react"),{fallback:j.jsx(c("CometPopoverLoadingState.react"),{withArrow:!0,xstyle:m.popoverFallback}),icon:d("fbicon")._(i("642536"),16),label:h._("Insert an emoji"),popoverProps:a,popoverResource:l})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("useDeferredModuleOnReady",["react"],(function(a,b,c,d,e,f,g){"use strict";b=d("react");var h=b.useEffect,i=b.useState;function a(b){var c=i(function(){return b.getModuleIfRequireable()}),a=c[0],d=c[1];h(function(){if(a!=null)return;var c=b.onReady(function(a){d(function(){return a})});return function(){c.remove()}},[b,a]);return a}g["default"]=a}),98);
__d("createCometUFIEmojiComposerPluginForOutline",["CometUFIInsertEmojiComposerActionForOutline.react","react","requireDeferred","useDeferredModuleOnReady"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react").useEffect,i=c("requireDeferred")("getUpgradedCometUFIEmojiComposerHandler").__setRef("createCometUFIEmojiComposerPluginForOutline");function j(a){var b=a.pluginProps.editor,d=c("useDeferredModuleOnReady")(i);h(function(){if(d!=null)return d(b)},[b,d]);return null}function a(a){return{above:null,action:function(){return c("CometUFIInsertEmojiComposerActionForOutline.react")},below:j,id:"emoji",inside:null,props:a}}g["default"]=a}),98);
__d("createCometUFIEmoticonsComposerPluginForOutline",["react","requireDeferred","useDeferredModuleOnReady"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react").useEffect,i=c("requireDeferred")("getUpgradedCometUFIEmoticonsComposerHandler").__setRef("createCometUFIEmoticonsComposerPluginForOutline");function j(a){var b=a.pluginProps.editor,d=c("useDeferredModuleOnReady")(i);h(function(){if(d!=null)return d(b)},[b,d]);return null}function a(a){return{above:null,action:null,below:j,id:"emoticons",inside:null,props:a}}g["default"]=a}),98);
__d("CometUFIGIFComposerPreviewArea.react",["fbt","CometImage.react","CometUFIComposerPreviewArea.react","react"],(function(a,b,c,d,e,f,g,h){"use strict";var i=d("react"),j=d("react").useCallback,k={previewImage:{borderTopStartRadius:"e72ty7fz",borderTopEndRadius:"qlfml3jp",borderBottomEndRadius:"inkptoze",borderBottomStartRadius:"qmr60zad",display:"a8c37x1j",height:"idiwt2bm",maxWidth:"d2edcug0"}};function l(a){return a.attachment&&a.attachment.__type==="GIF"?a.attachment.data:null}function a(a){var b=a.composerState,d=a.setComposerState;a=l(b);b=j(function(){d(function(){return{attachment:null}})},[d]);return a==null?null:i.jsx(c("CometUFIComposerPreviewArea.react"),{label:h._("Remove GIF"),onRemove:b,children:i.jsx(c("CometImage.react"),{height:a.media.preview.height,src:a.media.preview.url,width:a.media.preview.width,xstyle:k.previewImage})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("CometUFIInsertGIFComposerActionForOutline.react",["fbt","ix","CometPopoverLoadingState.react","CometUFILazyPopoverComposerAction.react","JSResourceForInteraction","fbicon","react"],(function(a,b,c,d,e,f,g,h,i){"use strict";var j=d("react"),k=d("react").useMemo,l=c("JSResourceForInteraction")("CometUFIGIFPickerPopoverForOutline.react").__setRef("CometUFIInsertGIFComposerActionForOutline.react"),m={popoverFallback:{minHeight:"if5txojj"}};function a(a){var b=a.pluginProps;a=k(function(){return{pluginProps:b}},[b]);return j.jsx(c("CometUFILazyPopoverComposerAction.react"),{fallback:j.jsx(c("CometPopoverLoadingState.react"),{withArrow:!0,xstyle:m.popoverFallback}),icon:d("fbicon")._(i("687980"),16),label:h._("Comment with a GIF"),popoverProps:a,popoverResource:l})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("useCometUFIGIFAttachmentMapper",["react"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react").useEffect;function a(a){h(function(){return a(function(a){return a.__type==="GIF"?{link:{external:{url:a.data.source.url}}}:null})},[a])}g["default"]=a}),98);
__d("createCometUFIGIFComposerPluginForOutline",["CometUFIGIFComposerPreviewArea.react","CometUFIInsertGIFComposerActionForOutline.react","qex","react","useCometUFIGIFAttachmentMapper"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react");function i(a){a=a.pluginProps;var b=a.addAttachmentMapper,d=a.composerState;a=a.setComposerState;c("useCometUFIGIFAttachmentMapper")(b);return h.jsx("div",{className:"buofh1pr",children:h.jsx(c("CometUFIGIFComposerPreviewArea.react"),{composerState:d,setComposerState:a})})}i.displayName=i.name+" [from "+f.id+"]";function j(a){a=a.pluginProps;a=a.composerState;return!a||!a.attachment?c("CometUFIInsertGIFComposerActionForOutline.react"):null}function a(a){a=a.ftentidentifier;return{above:null,action:j,below:i,id:"gifs",inside:null,props:{ftentidentifier:c("qex")._("1000665")?a:null}}}g["default"]=a}),98);
__d("createCometUFIHashtagComposerPluginForOutline",["react","requireDeferred","useDeferredModuleOnReady"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react").useEffect,i=c("requireDeferred")("getUpgradedCometUFIHashtagComposerHandler").__setRef("createCometUFIHashtagComposerPluginForOutline");function j(a){var b=a.pluginProps.editor,d=c("useDeferredModuleOnReady")(i);h(function(){if(d!=null)return d(b)},[b,d]);return null}function a(){return{above:null,action:null,below:j,id:"hashtag",inside:null,props:{}}}g["default"]=a}),98);
__d("CometUFIMediaUploadComposerActionForOutline.react",["fbt","ix","CometUFIActionsContext","CometUFIComposerActionButton.react","UFICommentFileInputAcceptValues","fbicon","react"],(function(a,b,c,d,e,f,g,h,i){"use strict";var j=d("react");b=d("react");var k=b.useCallback,l=b.useContext,m=b.useEffect,n=b.useRef,o=b.useState;function a(a){var b=a.pluginProps,e=b.composerState.feedbackID;a=b.fileIsHoveringOverDropTarget;var f=b.mediaUploadError!==null,g=l(d("CometUFIActionsContext").CometUFIActionsContext),p=g.registerUFIActions,q=n(null);g=o(!1);var r=g[0],s=g[1],t=k(function(){var a;s(!0);(a=q.current)==null?void 0:a.click()},[s]);m(function(){if(e==null)return;var a=p(e,{uploadMedia:t});return function(){a&&a.dispose()}},[p,t,e]);return j.jsxs(j.Fragment,{children:[j.jsx(c("CometUFIComposerActionButton.react"),{color:r?"highlight":f&&!a?"negative":"secondary",icon:a?d("fbicon")._(i("568448"),16):d("fbicon")._(i("550098"),16),label:f?h._("There was a problem attaching the file, please try again"):h._("Attach a photo or video"),onFocusIn:function(){return s(!1)},onPress:t}),j.jsx("input",{accept:c("UFICommentFileInputAcceptValues").both,className:"mkhogb32",onChange:function(a){var c=a.target.files.item(0);a=b.setComposerState;a(function(){return{attachment:{__type:"Media",reference:{__type:"File",file:c}}}});s(!1)},ref:q,type:"file"})]})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("cometUFIMediaUploadComposerPluginSupportedTypes",[],(function(a,b,c,d,e,f){"use strict";a=["photo","video"];b=a;f["default"]=b}),66);
__d("CometUFIMediaUploadProgressBar.react",["CometProgressStepper.react","react"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react");function a(a){var b=a.label;a=a.value;return h.jsx("div",{className:"bi6gxh9e aov4n071 oi9244e8 buofh1pr",children:h.jsx(c("CometProgressStepper.react"),{label:b,step:a,totalSteps:100})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("useCometUFIMediaUploadDragAndDrop",["react","useCometOutlineFileDragAndDrop"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react").useCallback;function i(a,b){a(function(){return{attachment:{__type:"Media",reference:{__type:"File",file:b}}}})}function a(a){var b=a.editor,d=a.isMimeTypeAcceptable,e=a.setComposerState,f=a.setFileIsHoveringOverDropTarget;a=h(function(a,b){f(b)},[f]);var g=h(function(a){a.length>0&&i(e,a[0])},[e]);c("useCometOutlineFileDragAndDrop")({editor:b,isMimeTypeAcceptable:d,onHover:a,onSubmit:g})}g["default"]=a}),98);
__d("useCometUFIPreventCommitWhenUploadingFile",["react"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react").useEffect;function a(a){var b=a.addCommitListener,c=a.composerState;h(function(){return b(function(){var a=c.attachment;return(a==null?void 0:a.__type)==="Media"&&(a==null?void 0:a.reference.__type)!=="UploadedFile"?"handled":"not-handled"})},[b,c.attachment])}g["default"]=a}),98);
__d("createCometUFIMediaUploadComposerPluginForOutline",["fbt","CometPlaceholder.react","CometUFIComposerPreviewArea.react","CometUFIMediaUploadComposerActionForOutline.react","CometUFIMediaUploadProgressBar.react","JSResourceForInteraction","cometIsMimeTypeForMedia","cometUFIMediaUploadComposerPluginSupportedTypes","lazyLoadComponent","react","useCometUFIMediaUploadDragAndDrop","useCometUFIPreventCommitWhenUploadingFile"],(function(a,b,c,d,e,f,g,h){"use strict";var i=d("react"),j=d("react").useCallback,k=c("lazyLoadComponent")(c("JSResourceForInteraction")("CometUFIMediaUploadUpgradedPlugin.experimental.react").__setRef("createCometUFIMediaUploadComposerPluginForOutline"));function l(a){return((a=a.attachment)==null?void 0:a.__type)==="Media"}function m(a){if(a.kind!=="file")return!1;for(var b=c("cometUFIMediaUploadComposerPluginSupportedTypes"),e=Array.isArray(b),f=0,b=e?b:b[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var g;if(e){if(f>=b.length)break;g=b[f++]}else{f=b.next();if(f.done)break;g=f.value}g=g;switch(g){case"photo":if(d("cometIsMimeTypeForMedia").isMimeTypeForPhoto(a.type))return!0;break;case"video":if(d("cometIsMimeTypeForMedia").isMimeTypeForVideo(a.type))return!0;break;default:g}}return!1}function n(a){var b=a.feedback;a=a.pluginProps;var d=a.addCommitListener,e=a.composerState,f=a.editor,g=a.setComposerState,n=a.setFileIsHoveringOverDropTarget,o=l(e);c("useCometUFIMediaUploadDragAndDrop")({editor:f,isMimeTypeAcceptable:m,setComposerState:g,setFileIsHoveringOverDropTarget:n});c("useCometUFIPreventCommitWhenUploadingFile")({addCommitListener:d,composerState:e});f=j(function(){g(function(){return{attachment:null}})},[g]);n=i.jsx("div",{className:"buofh1pr",children:i.jsx(c("CometUFIComposerPreviewArea.react"),{label:h._("Cancel upload"),onRemove:f,children:i.jsx(c("CometUFIMediaUploadProgressBar.react"),{label:h._("{value}\u0025",[h._param("value","0")]),value:0})})});if(o)return i.jsx(c("CometPlaceholder.react"),{fallback:n,children:i.jsx(k,{feedback:b,pluginProps:a})});else return null}n.displayName=n.name+" [from "+f.id+"]";function o(a){a=a.pluginProps;a=a.composerState;return a.attachment!=null?null:c("CometUFIMediaUploadComposerActionForOutline.react")}function a(a){a=a.feedback;return{above:null,action:o,below:n,id:"media_upload",inside:null,props:{feedback:a}}}g["default"]=a}),98);
__d("createCometUFIGroupMentionsComposerPluginForOutline",["react","useDeferredModuleOnReady"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react");function i(a){var b=a.config,d=a.pluginProps;a=a.upgradedPluginDeferred_FOR_DRAFTJS_AND_OUTLINE;a=c("useDeferredModuleOnReady")(a);if(a==null)return null;else return h.jsx(a,{config:b,pluginProps:d})}i.displayName=i.name+" [from "+f.id+"]";function a(a){var b=a.upgradedPluginDeferred_FOR_DRAFTJS_AND_OUTLINE;a=babelHelpers.objectWithoutPropertiesLoose(a,["upgradedPluginDeferred_FOR_DRAFTJS_AND_OUTLINE"]);return{above:null,action:null,below:i,id:"group_mentions",inside:null,props:{config:a,upgradedPluginDeferred_FOR_DRAFTJS_AND_OUTLINE:b}}}g["default"]=a}),98);
__d("createCometUFIMentionsComposerPluginForOutline",["react","useDeferredModuleOnReady"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react");function i(a){var b=a.config,d=a.pluginProps;a=a.upgradedPluginDeferred_FOR_DRAFTJS_AND_OUTLINE;a=c("useDeferredModuleOnReady")(a);if(a==null)return null;else return h.jsx(a,{config:b,pluginProps:d})}i.displayName=i.name+" [from "+f.id+"]";function a(a){var b=a.upgradedPluginDeferred_FOR_DRAFTJS_AND_OUTLINE;a=babelHelpers.objectWithoutPropertiesLoose(a,["upgradedPluginDeferred_FOR_DRAFTJS_AND_OUTLINE"]);return{above:null,action:null,below:i,id:"mentions",inside:null,props:{config:a,upgradedPluginDeferred_FOR_DRAFTJS_AND_OUTLINE:b}}}g["default"]=a}),98);
__d("OutlineParagraphNode",["cr:1967614"],(function(a,b,c,d,e,f){e.exports=b("cr:1967614")}),null);
__d("createCometUFIPrefillMentionComposerPluginForOutline",["CometUFIOutlineGenericEntityNode","FBLogger","Outline","OutlineParagraphNode","requireDeferred","useLayoutEffect_SAFE_FOR_SSR"],(function(a,b,c,d,e,f,g){"use strict";var h=c("requireDeferred")("UFIODSLogger").__setRef("createCometUFIPrefillMentionComposerPluginForOutline");function i(a){a=a.pluginProps;var b=a.addCommandListener,e=a.editor;a=a.setComposerState;c("useLayoutEffect_SAFE_FOR_SSR")(function(){b(function(a){if(a.__type==="PrefillMention"){h.onReady(function(a){a.bump("prefill_mention_plugin.prefill_requested.with_implementation","relay")});e.update(function(b){var f=a.mentionableEntity,g=e.getTextContent(),h=g.trim().length===0,i=!1;b.getRoot().getAllTextNodes().forEach(function(a){a instanceof d("CometUFIOutlineGenericEntityNode").CometUFIOutlineGenericEntityNode&&a.getTextContent()===g.trim()&&(i=!0)});if(!h&&!i)return;h=b.getRoot();var k=h.getFirstChild();if(k instanceof d("Outline").BlockNode){k.clear();var l=d("Outline").createTextNode();k.append(l);l=l}else if(k===null){k=d("Outline").createTextNode();h.append(d("OutlineParagraphNode").createParagraphNode().append(k));l=k}else{h=b.getRoot().getFirstTextNode();if(h===null){c("FBLogger")("UFIOutlineComposer").mustfix("Prefill mentions plugin found a nullish targetNode. This should not happen.");return}l=h}k=j(f.getType());b=d("CometUFIOutlineGenericEntityNode").createCometUFIOutlineGenericEntityNode({id:f.getUniqueID(),text:f.getTitle(),type:k,uri:f.getURI()});l.replace(b);h=new(d("Outline").TextNode)(" ");b.insertAfter(h);h.select()},"CometUFIPrefillMentionComposerPlugin");return"handled"}return"not-handled"})},[b,e,a]);return null}function j(a){switch(a){case"Actor":case"Application":case"CMSObject":case"Doc":case"Event":case"FundraiserPersonForPerson":case"FundraiserPersonToCharity":case"GeneralGroupContextualProfile":case"Group":case"GroupAnonAuthorProfile":case"GroupCommerceProductItem":case"GroupRule":case"InstantArticle":case"KnowledgeNote":case"Menu":case"Note":case"Page":case"Photo":case"ProductItem":case"ReducedMessagingActor":case"Story":case"User":case"Video":case"VideoList":case"WorkKnowledgeCollection":return a;default:c("FBLogger")("UFIOutlinePlugin").mustfix("PrefillMention unexpected command entity type "+a);return"Actor"}}function a(){return{above:null,action:null,below:i,id:"prefill_mentions",inside:null,props:Object.freeze({})}}g["default"]=a}),98);
__d("createCometUFISetReplyClickedComposerPluginForOutline",["useLayoutEffect_SAFE_FOR_SSR"],(function(a,b,c,d,e,f,g){"use strict";function h(a){a=a.pluginProps;var b=a.addCommandListener,d=a.setComposerState;c("useLayoutEffect_SAFE_FOR_SSR")(function(){b(function(a){if(a.__type==="SetReplyClicked"){d(function(){return{replyTargetClicked:!0}});return"handled"}return"not-handled"})},[b,d]);return null}function a(){return{above:null,action:null,below:h,id:"set_reply_clicked",inside:null,props:{}}}g["default"]=a}),98);
__d("getComposerStateSnapshotterForOutline",["CometLruCache","memoizeWithArgsWeak"],(function(a,b,c,d,e,f,g){"use strict";var h=d("CometLruCache").create(20);function i(a,b){return JSON.stringify({commentID:(b=b)!=null?b:"",feedbackID:a})}function a(a,b){var c=i(a,b);return{clear:function(){h["delete"](c)},get:function(){return h.get(c)},set:function(a){h.set(c,a)}}}b=c("memoizeWithArgsWeak")(a);g["default"]=b}),98);
__d("createCometStateSnapshotComposerPluginForOutline",["getComposerStateSnapshotterForOutline","react"],(function(a,b,c,d,e,f,g){"use strict";b=d("react");var h=b.useEffect,i=b.useRef;function j(a){a=a.pluginProps;var b=a.addCommandListener,d=a.addCommitListener,e=a.composerState,f=a.editor,g=a.setComposerState;a=e.commentID;var j=e.feedbackID,k=c("getComposerStateSnapshotterForOutline")(j,(j=a)!=null?j:null),l=i(!1),m=i(!1),n=i(!1),o=i(f.getViewModel());h(function(){if(!l.current){var a=k.get();if(a!=null){var b=a.state;b.editor;var c=babelHelpers.objectWithoutPropertiesLoose(b,["editor"]);g(function(){return c});f.setViewModel(a.viewModel)}l.current=!0}return function(){f.getRootElement()==null&&!m.current&&!n.current&&(o.current.markDirty(),k.set({state:e,viewModel:o.current}))}},[k,g,f,e]);h(function(){return f.addListener("update",function(){f.getRootElement()!=null&&(o.current=f.getViewModel())})},[f]);h(function(){return d(function(){m.current=!0;k.clear();return"not-handled"})},[k,d]);h(function(){return b(function(a){if(a.__type==="BeforeFinishEdit"){n.current=!0;k.clear();return"handled"}return"not-handled"})});return null}function a(){return{above:null,action:null,below:j,id:"statesnapshot",inside:null,props:Object.freeze({})}}g["default"]=a}),98);
__d("CometUFIInsertStickerComposerActionForOutline.react",["fbt","ix","CometPopoverLoadingState.react","CometStickerPickerCardPopoverRootWithPresetProps","CometUFIEntryPointPopoverComposerAction.react","fbicon","gkx","react","useCometOutlineEmptyListeners"],(function(a,b,c,d,e,f,g,h,i){"use strict";var j=d("react"),k=d("react").useCallback;b=274;var l=Math.floor(b/4),m={popover:{height:"j707pzvn",width:"hdkcmrsv"},popoverFallback:{minHeight:"enf79l09"}},n=10;function a(a){var b=a.feedbackID;a=a.pluginProps;var e=a.setComposerState,f=a.commentAction,g=a.onCommit,o=d("useCometOutlineEmptyListeners").useCometOutlineIsEmpty(a.addEmptyListener),p=a.editor;a=k(function(a){var b=a.stickerID;if(c("gkx")("1632")){a=function(a){return babelHelpers["extends"]({},a,{attachment:{__type:"Sticker",id:b},updateSource:"InsertStickerButton"})};o&&f==="ADD"?g(a):(e(a),p.focus())}else e(function(){return{attachment:{__type:"Sticker",id:b},updateSource:"InsertStickerButton"}},function(){o&&f==="ADD"&&g(),p.focus()})},[e,o,f,p,g]);return j.jsx(c("CometUFIEntryPointPopoverComposerAction.react"),babelHelpers["extends"]({},c("CometStickerPickerCardPopoverRootWithPresetProps").props,{entryPointParams:{feedbackID:b,flyoutTagsCount:n,stickerInterface:"COMMENTS"},fallback:j.jsx(c("CometPopoverLoadingState.react"),{withArrow:!0,xstyle:m.popoverFallback}),icon:d("fbicon")._(i("687986"),16),label:h._("Comment with a Sticker"),otherProps:{onSelect:a,stickerHeight:l,stickerWidth:l,xstyle:m.popover},popoverEntryPoint:c("CometStickerPickerCardPopoverRootWithPresetProps").resource}))}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("CometUFIStickersComposerPreviewArea.react",["fbt","CometProgressIndicator.react","CometUFIComposerPreviewArea.react","FBLogger","react","requireDeferred","useDeferredModuleOnReady"],(function(a,b,c,d,e,f,g,h){"use strict";var i=d("react"),j=d("react").useCallback,k=c("requireDeferred")("CometUFIStickersComposerUpgradedPreviewContent.react").__setRef("CometUFIStickersComposerPreviewArea.react");function l(a){return a.attachment&&a.attachment.__type==="Sticker"?a.attachment.id:null}function a(a){var b=a.composerState,d=a.environment,e=a.setComposerState;a=l(b);b=c("useDeferredModuleOnReady")(k);var f=j(function(){e(function(){return{attachment:null}})},[e]),g=j(function(a){e(function(){return{attachment:null}}),c("FBLogger")("ufi2").catching(a).mustfix("Encountered an error while rendering a sticker.")},[e]),m=i.jsx(c("CometProgressIndicator.react"),{size:"small"});return a==null?null:i.jsx(c("CometUFIComposerPreviewArea.react"),{label:h._("Remove sticker"),onRemove:f,children:b==null?m:i.jsx(b,{environment:d,loadingIndicatorElement:m,onError:g,stickerId:a})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("useCometUFIStickersAttachmentMapper",["react"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react").useEffect;function a(a){h(function(){return a(function(a){return a.__type==="Sticker"?{media:{id:a.id}}:null})},[a])}g["default"]=a}),98);
__d("createCometUFIStickersComposerPluginForOutline",["CometUFIInsertStickerComposerActionForOutline.react","CometUFIStickersComposerPreviewArea.react","react","useCometUFIStickersAttachmentMapper"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react");function i(a){var b=a.environment;a=a.pluginProps;var d=a.addAttachmentMapper,e=a.composerState;a=a.setComposerState;c("useCometUFIStickersAttachmentMapper")(d);return h.jsx("div",{className:"buofh1pr",children:h.jsx(c("CometUFIStickersComposerPreviewArea.react"),{composerState:e,environment:b,setComposerState:a})})}i.displayName=i.name+" [from "+f.id+"]";function j(a){a=a.pluginProps;a=a.composerState;return!a||!a.attachment?c("CometUFIInsertStickerComposerActionForOutline.react"):null}function a(a){return{above:null,action:j,below:i,id:"stickers",inside:null,props:a}}g["default"]=a}),98);
__d("createCometUFILiveTypingBroadcastComposerPluginForOutline",["react","requireDeferred","useDeferredModuleOnReady"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react"),i=c("requireDeferred")("CometUFILiveTypingBroadcastComposerUpgradedPlugin.react").__setRef("createCometUFILiveTypingBroadcastComposerPluginForOutline");function j(a){var b=a.feedback,d=a.pluginProps;a=a.relayEnvironment;var e=c("useDeferredModuleOnReady")(i);return e!=null?h.jsx(e,{feedback:b,pluginProps:d,relayEnvironment:a}):null}function a(a){var b=a.feedback;a=a.relayEnvironment;return{above:null,action:null,below:j,id:"typing_broadcast",inside:null,props:{feedback:b,relayEnvironment:a}}}g["default"]=a}),98);
__d("createDeferredUpgradedUFI2GroupMentionsComposerPluginForOutline",["requireDeferred"],(function(a,b,c,d,e,f,g){"use strict";a=c("requireDeferred")("createUpgradedUFI2GroupMentionsComposerPluginForOutline").__setRef("createDeferredUpgradedUFI2GroupMentionsComposerPluginForOutline");g["default"]=a}),98);
__d("createDeferredUpgradedUFI2MentionsComposerPluginForOutline",["requireDeferred"],(function(a,b,c,d,e,f,g){"use strict";a=c("requireDeferred")("createUpgradedUFI2MentionsComposerPluginForOutline").__setRef("createDeferredUpgradedUFI2MentionsComposerPluginForOutline");g["default"]=a}),98);
/**
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
  *
  * @noflow
  * @nolint
  * @preventMunge
  * @preserve-invariant-messages
  * @generated
  * @preserve-whitespace
  * @fullSyntaxTransform
  */__d("Outline.prod",[],(function $module_Outline_prod(global,require,requireDynamic,requireLazy,module,exports){

"use strict";function l(a){throw Error("Minified Outline error #"+a+"; see codes.json for the full message or "+"use the non-minified dev environment for full errors and additional helpful warnings.");}
var aa=/^[^A-Za-z\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u02b8\u0300-\u0590\u0800-\u1fff\u200e\u2c00-\ufb1c\ufe00-\ufe6f\ufefd-\uffff]*[\u0591-\u07ff\ufb1d-\ufdfd\ufe70-\ufefc]/,ba=/^[^\u0591-\u07ff\ufb1d-\ufdfd\ufe70-\ufefc]*[A-Za-z\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u02b8\u0300-\u0590\u0800-\u1fff\u200e\u2c00-\ufb1c\ufe00-\ufe6f\ufefd-\uffff]/,ca=function ca(){};var da=0;var ea=Array.isArray,fa=window.Promise,ha="function"===typeof queueMicrotask?queueMicrotask:function(a){return fa.resolve().then(a);};
function ia(a,b,c){a=a.getRootElement();try{return null!==a&&a.contains(b)&&a.contains(c);}catch(_unused){return!1;}}function ja(a){return aa.test(a)?"rtl":ba.test(a)?"ltr":null;}function q(a){return a.isImmutable()||a.isInert()||a.isSegmented();}function ka(a){for(;null!=a;){if(3===a.nodeType)return a;a=a.firstChild;}return null;}var r=function(){function r(a,b){this.key=a;this.offset=b;this.type="character";}var _proto=r.prototype;_proto.is=function is(a){return this.key===a.key&&this.offset===a.offset;};_proto.getNode=function getNode(){var a=u(this.key);null===a&&l(21);return a;};return r;}();var
x=function(){function x(a,b){this.anchor=a;this.focus=b;this.isDirty=!1;}var _proto2=x.prototype;_proto2.is=function is(a){return this.anchor.is(a.anchor)&&this.focus.is(a.focus);};_proto2.isCollapsed=function isCollapsed(){return this.anchor.is(this.focus);};_proto2.getNodes=function getNodes(){var a=this.anchor.getNode(),b=this.focus.getNode();return a===b?[a]:a.getNodesBetween(b);};_proto2.setBaseAndExtent=function setBaseAndExtent(a,b,c,d){this.anchor.offset=b;this.focus.offset=d;this.anchor.key=a;this.focus.key=c;this.isDirty=!0;};_proto2.getTextContent=function getTextContent(){var a=this.getNodes();if(0===a.length)return"";var b=a[0],c=a[a.length-1],d=b===this.anchor.getNode(),
e=this.anchor.offset,f=this.focus.offset;var g="";a.forEach(function(h){if(y(h)){var k=h.getTextContent();h===b?k=h===c?e<f?k.slice(e,f):k.slice(f,e):d?k.slice(e):k.slice(f):h===c&&(k=d?k.slice(0,f):k.slice(0,e));g+=k;}else z(h)||A(h)?g+="\n":C(h)&&(g+=h.getTextContent());});return g;};_proto2.applyDOMRange=function applyDOMRange(a){var b=la();a=na(a.startContainer,a.startOffset,a.endContainer,a.endOffset,b);if(null!==a){var _a=a,c=_a[0],d=_a[1],e=_a[2],f=_a[3];a=this.anchor;b=this.focus;a.key=c.__key;b.key=d.__key;a.offset=e;b.offset=f;}};_proto2.clone=function clone(){var a=this.anchor,
b=this.focus;return new x(new r(a.key,a.offset),new r(b.key,b.offset));};return x;}();function oa(a){a:{for(;null!=a;){var b=a.__outlineInternalRef;if(void 0!==b){a=b;break a;}a=a.parentNode;}a=null;}return null===a?null:u(a);}
function pa(a,b){var c=a;if(1===c.nodeType&&"BR"!==c.nodeName){a=!1;c=c.childNodes;var d=c.length;b===d&&(a=!0,b=d-1);c=c[b];d=oa(c);if(z(d)){if(a){d=d.getLastTextNode();if(null===d)return null;b=d.getTextContentSize();}else d=d.getFirstTextNode(),b=0;}else y(d)&&(b=a?d.getTextContentSize():0);}else d=oa(c);if(A(d)||y(d)&&d.isInert())return b=d.getPreviousSibling(),y(b)||l(22),a=b.getTextContentSize(),[b,a];if(!y(d))return null;a=ka(c);null!==a&&0!==b&&"\u2060"===a.nodeValue[0]&&b--;""===d.getTextContent()&&(
b=0);return[d,b];}
function na(a,b,c,d,e){if(null===a||null===c||!ia(e,a,c))return null;b=pa(a,b);if(null===b)return null;a=b[0];b=b[1];d=pa(c,d);if(null===d)return null;c=d[0];d=d[1];var f=a.getTextContentSize();0!==f&&(a===c&&b===d?0===b&&(f=a.getPreviousSibling(),y(f)&&!f.isImmutable()&&(d=f.getTextContentSize(),c=a=f,b=d)):b===f&&(f=a.getNextSibling(),y(f)&&!f.isImmutable()&&(a=f,b=0)));f=e.getViewModel()._selection;e.isComposing()&&e._compositionKey!==a.__key&&null!==f&&(a=f.anchor.getNode(),b=f.anchor.offset,
c=f.focus.getNode(),d=f.focus.offset);return[a,c,b,d];}
function qa(a,b){a=b.getViewModel()._selection;var c=(c=window.event)&&c.type;var d;if(void 0===c||null===a||"selectionchange"===c||"beforeinput"===c||"compositionstart"===c||"compositionend"===c){var e=window.getSelection();if(null===e)return null;a=e.anchorNode;c=e.focusNode;d=e.anchorOffset;e=e.focusOffset;}else return new x(new r(a.anchor.key,a.anchor.offset),new r(a.focus.key,a.focus.offset));b=na(a,d,c,e,b);if(null===b)return null;var _b=b,f=_b[0],g=_b[1],h=_b[2],k=_b[3];return new x(new r(f.__key,h),new r(g.__key,
k));}function D(){return E()._selection;}function ra(a,b,c){for(;null!==a&&!c.has(a);){c.add(a);a=b.get(a);if(void 0===a)break;a=a.__parent;}}function sa(a){a=a.getTopParentBlockOrThrow();if(null!==a.getDirection()){var b=a.getTextContent(!1,!1);null===ja(b)&&a.setDirection(null);}}function ta(a){var b=a.getPreviousSibling();if(null===b||!y(b)||q(b))b=F(""),a.insertBefore(b);b=a.getNextSibling();if(null===b||!y(b)||q(b))b=F(""),a.insertAfter(b);return a;}var
ua=function(){ua.deserialize=function deserialize(){l(23,this.constructor.name);};var _proto3=ua.prototype;_proto3.clone=function clone(){l(24,this.constructor.name);};function ua(a){this.__type="node";this.__flags=0;if(!a){I();a=E();var b=a._dirtyNodes,c=""+da++;a._nodeMap.set(c,this);b.add(c);a=c;}this.__key=a;this.__parent=null;}_proto3.getType=function getType(){return this.__type;};_proto3.isAttached=function isAttached(){var a=this.__parent;if(null===a)return!1;a=u(a);return null!==a&&a.isAttached();};_proto3.isSelected=function isSelected(){var a=E()._selection,b=this.__key;return null!==a&&a.anchor.key===b&&a.focus.key===b;};_proto3.getFlags=function getFlags(){return this.getLatest().__flags;};_proto3.getKey=function getKey(){return this.__key;};_proto3.getParent=function getParent(){var a=
this.getLatest().__parent;return null===a?null:u(a);};_proto3.getParentOrThrow=function getParentOrThrow(){var a=this.getParent();null===a&&l(25,this.__key);return a;};_proto3.getParentBlockOrThrow=function getParentBlockOrThrow(){var a=this;for(;null!==a;){if(a=a.getParent(),z(a))return a;}l(26,this.__key);};_proto3.getTopParentBlock=function getTopParentBlock(){var a=this;for(;null!==a;){var b=a.getParent();if(va(b)&&z(a))return a;a=b;}return null;};_proto3.getTopParentBlockOrThrow=function getTopParentBlockOrThrow(){var a=this.getTopParentBlock();null===a&&l(27,this.__key);return a;};_proto3.getParents=function getParents(){var a=[];var b=this.getParent();for(;null!==b;){a.push(b),
b=b.getParent();}return a;};_proto3.getPreviousSibling=function getPreviousSibling(){var a=this.getParentOrThrow().__children,b=a.indexOf(this.__key);return 0>=b?null:u(a[b-1]);};_proto3.getPreviousSiblings=function getPreviousSiblings(){var a=this.getParentOrThrow().__children,b=a.indexOf(this.__key);return a.slice(0,b).map(function(c){return wa(c);});};_proto3.getNextSibling=function getNextSibling(){var a=this.getParentOrThrow().__children,b=a.length,c=a.indexOf(this.__key);return c>=b-1?null:u(a[c+1]);};_proto3.getNextSiblings=function getNextSiblings(){var a=this.getParentOrThrow().__children,b=a.indexOf(this.__key);return a.slice(b+1).map(function(c){return wa(c);});};_proto3.getCommonAncestor=function getCommonAncestor(a){var b=
this.getParents();var c=a.getParents();a=b.length;var d=c.length;if(0===a||0===d||b[a-1]!==c[d-1])return null;c=new Set(c);for(d=0;d<a;d++){var e=b[d];if(c.has(e))return e;}return null;};_proto3.is=function is(a){return null==a?!1:this.getKey()===a.getKey();};_proto3.isBefore=function isBefore(a){var b=this.getCommonAncestor(a);var c=this;for(;;){var d=c.getParentOrThrow();if(d===b){d=d.__children.indexOf(c.__key);break;}c=d;}for(c=a;;){a=c.getParentOrThrow();if(a===b){b=a.__children.indexOf(c.__key);break;}c=a;}return d<b;};_proto3.isParentOf=function isParentOf(a){var b=this.__key;
for(;null!==a;){if(a.__key===b)return!0;a=a.getParent();}return!1;};_proto3.getNodesBetween=function getNodesBetween(a){var b=[];if(this.isBefore(a))for(var c=this;;){b.push(c);if(c===a)break;var d=z(c)?c.getFirstChild():null;if(null!==d)c=d;else if(d=c.getNextSibling(),null!==d)c=d;else{c=c.getParentOrThrow();b.push(c);d=c;do{null===d&&l(28),c=d.getNextSibling(),d=d.getParent();}while(null===c);}}else{for(c=this;;){b.push(c);if(c===a)break;d=z(c)?c.getLastChild():null;if(null!==d)c=d;else if(d=c.getPreviousSibling(),null!==d)c=d;else{c=
c.getParentOrThrow();b.push(c);d=c;do{null===d&&l(28),c=d.getPreviousSibling(),d=d.getParent();}while(null===c);}}b.reverse();}return b;};_proto3.isImmutable=function isImmutable(){return 0!==(this.getLatest().__flags&1);};_proto3.isSegmented=function isSegmented(){return 0!==(this.getLatest().__flags&2);};_proto3.isInert=function isInert(){return 0!==(this.getLatest().__flags&4);};_proto3.isDirectionless=function isDirectionless(){return 0!==(this.getLatest().__flags&8);};_proto3.isDirty=function isDirty(){return E()._dirtyNodes.has(this.__key);};_proto3.isComposing=function isComposing(){return this.__key===L();};_proto3.getLatest=function getLatest(){var a=u(this.__key);null===a&&l(29);return a;};_proto3.getWritable=function getWritable(){I();
var a=E(),b=a._dirtyNodes;var c=a._nodeMap,d=this.__key;var e=this.getLatest(),f=e.__parent;null!==f&&ra(f,c,a._dirtySubTrees);if(b.has(d))return e;a=e.clone();a.__parent=f;a.__flags=e.__flags;z(a)&&(a.__children=Array.from(e.__children));a.__key=d;e=a.getLatest();f=e.__parent;b=E();var g=b._nodeMap;null!==f&&ra(f,g,b._dirtySubTrees);b._dirtyNodes.add(e.__key);c.set(d,a);return a;};_proto3.getTextContent=function getTextContent(){return"";};_proto3.getTextContentSize=function getTextContentSize(a,b){return this.getTextContent(a,b).length;};_proto3.createDOM=function createDOM(){l(30);};_proto3.updateDOM=function updateDOM(){l(31);};_proto3.setFlags=function setFlags(a){I();
this.isImmutable()&&l(32);var b=this.getWritable();this.getWritable().__flags=a;return b;};_proto3.makeImmutable=function makeImmutable(){I();var a=this.getWritable();a.__flags|=1;return a;};_proto3.makeSegmented=function makeSegmented(){I();var a=this.getWritable();a.__flags|=2;return a;};_proto3.makeInert=function makeInert(){I();var a=this.getWritable();a.__flags|=4;return a;};_proto3.makeDirectionless=function makeDirectionless(){I();var a=this.getWritable();a.__flags|=8;return a;};_proto3.remove=function remove(){I();var a=this.__key,b=this.getParent();null!==b&&(b=b.getWritable().__children,a=b.indexOf(a),-1<a&&b.splice(a,1),this.getWritable().__parent=
null);};_proto3.replace=function replace(a,b){I();var c;var d=this.__key;if(b&&y(this)&&(b=D())){var e=b.anchor.getNode();b.isCollapsed()&&e.__key===d&&(c=b.anchor.offset);}a=a.getWritable();b=a.getParent();null!==b&&(b=b.getWritable().__children,e=b.indexOf(a.__key),-1<e&&b.splice(e,1));e=this.getParentOrThrow();var f=e.getWritable().__children,g=f.indexOf(this.__key);b=a.__key;-1<g&&f.splice(g,0,b);a.__parent=e.__key;this.remove();e=a.__flags;e&8&&sa(a);(e&1||e&2||e&4||A(a))&&ta(a);y(a)&&void 0!==c&&a.select(c,c);L()===
d&&xa(b);return a;};_proto3.insertAfter=function insertAfter(a){I();var b=this.getWritable();a=a.getWritable();var c=a.getParent();if(null!==c){c=c.getWritable().__children;var d=c.indexOf(a.__key);-1<d&&c.splice(d,1);}d=this.getParentOrThrow().getWritable();c=a.__key;a.__parent=b.__parent;d=d.__children;var e=d.indexOf(b.__key);-1<e?d.splice(e+1,0,c):d.push(c);c=a.__flags;c&8&&sa(a);(c&1||c&2||c&4||A(a))&&ta(a);return b;};_proto3.insertBefore=function insertBefore(a){I();var b=this.getWritable();a=a.getWritable();var c=a.getParent();if(null!==c){c=c.getWritable().__children;
var d=c.indexOf(a.__key);-1<d&&c.splice(d,1);}d=this.getParentOrThrow().getWritable();c=a.__key;a.__parent=b.__parent;d=d.__children;var e=d.indexOf(b.__key);-1<e?d.splice(e,0,c):d.push(c);c=a.__flags;c&8&&sa(a);(c&1||c&2||c&4||A(a))&&ta(a);return b;};_proto3.selectNext=function selectNext(a,b){I();var c=this.getNextSibling();null!==c&&y(c)&&!q(c)||l(33);return c.select(a,b);};return ua;}();function u(a){a=E()._nodeMap.get(a);return void 0===a?null:a;}function wa(a){a=u(a);null===a&&l(34);return a;}
function xa(a){var b=la();var c=b._compositionKey;b._compositionKey=a;null!==c&&(b=u(c),null!==b&&b.getWritable());null!==a&&(a=u(a),null!==a&&a.getWritable());}function L(){return la()._compositionKey;}
function ya(a,b,c,d,e){if(e===void 0){e={};}var f=c._nodeTypes.get(a.__type);void 0===f&&l(35);f=f.deserialize(a);var g=f.__key;va(f)&&E()._nodeMap.set("root",f);f.__flags=a.__flags;f.__flags&512&&(f.__flags^=512);f.__parent=d;if(z(f)){d=a.__children;for(var k=0;k<d.length;k++){var h=b.get(d[k]);void 0!==h&&(h=ya(h,b,c,g,e).getKey(),f.__children.push(h));}}b=null!=e?e.originalSelection:void 0;null!=b&&(a.__key===b.anchor.key&&(e.remappedSelection=e.remappedSelection||{anchor:babelHelpers["extends"]({},b.anchor),focus:babelHelpers["extends"]({},b.focus)},e.remappedSelection.anchor.key=
f.__key),a.__key===b.focus.key&&(e.remappedSelection=e.remappedSelection||{anchor:babelHelpers["extends"]({},b.anchor),focus:babelHelpers["extends"]({},b.focus)},e.remappedSelection.focus.key=f.__key));return f;}var za=function(_ua){babelHelpers.inheritsLoose(za,_ua);function za(a){var _this;_this=_ua.call(this,a)||this;_this.__type="decorator";_this.__flags=1;return _this;}var _proto4=za.prototype;_proto4.decorate=function decorate(){l(15);};return za;}(ua);function C(a){return a instanceof za;}var
Aa=function(_ua2){babelHelpers.inheritsLoose(Aa,_ua2);function Aa(a){var _this2;_this2=_ua2.call(this,a)||this;_this2.__children=[];return _this2;}var _proto5=Aa.prototype;_proto5.getChildren=function getChildren(){var a=this.getLatest().__children,b=[];for(var c=0;c<a.length;c++){var d=u(a[c]);null!==d&&b.push(d);}return b;};_proto5.getChildrenSize=function getChildrenSize(){return this.getLatest().__children.length;};_proto5.getAllTextNodes=function getAllTextNodes(a){var b=[],c=this.getLatest().__children;for(var e=0;e<c.length;e++){var d=u(c[e]);!y(d)||!a&&d.isInert()?z(d)&&(d=d.getAllTextNodes(a),b.push.apply(b,d)):b.push(d);}return b;};_proto5.getFirstTextNode=function getFirstTextNode(a){var b=this.getChildren();for(var c=0;c<b.length;c++){var d=
b[c];if(y(d)&&(a||!d.isInert()))return d;if(z(d))return d.getFirstTextNode();}return null;};_proto5.getLastTextNode=function getLastTextNode(a){var b=this.getChildren();for(var c=b.length-1;0<=c;c--){var d=b[c];if(y(d)&&(a||!d.isInert()))return d;if(z(d))return d.getLastTextNode();}return null;};_proto5.getFirstChild=function getFirstChild(){var a=this.getLatest().__children;return 0===a.length?null:u(a[0]);};_proto5.getLastChild=function getLastChild(){var a=this.getLatest().__children,b=a.length;return 0===b?null:u(a[b-1]);};_proto5.getTextContent=function getTextContent(a,b){if(!a&&this.isInert()||!1===b&&this.isDirectionless())return"";
var c="";var d=this.getChildren(),e=d.length;for(var f=0;f<e;f++){var g=d[f];c+=g.getTextContent(a,b);z(g)&&f!==e-1&&(c+="\n\n");}return c;};_proto5.getDirection=function getDirection(){var a=this.__flags;return a&2048?"ltr":a&4096?"rtl":null;};_proto5.clear=function clear(){I();var a=this.getWritable();this.getChildren().forEach(function(b){return b.remove();});return a;};_proto5.append=function append(a){I();var b=this.getWritable();a=a.getWritable();var c=a.getParent();if(null!==c){c=c.getWritable().__children;var d=c.indexOf(a.__key);-1<d&&c.splice(d,1);}a.__parent=b.__key;b.__children.push(a.__key);
c=a.__flags;c&8&&sa(a);(c&1||c&2||c&4||A(a))&&ta(a);return b;};_proto5.insertNewAfter=function insertNewAfter(){return null;};_proto5.canInsertTab=function canInsertTab(){return!1;};_proto5.setDirection=function setDirection(a){I();var b=this.getWritable(),c=b.__flags;c&2048&&(b.__flags^=2048);c&4096&&(b.__flags^=4096);"ltr"===a?b.__flags|=2048:"rtl"===a&&(b.__flags|=4096);return b;};return Aa;}(ua);function z(a){return a instanceof Aa;}var Ba={bold:16,underline:128,strikethrough:64,italic:32,code:256,overflowed:512,unmergeable:1024};function Ca(a,b){return b&16?"strong":b&32?"em":"span";}
function Da(a,b,c,d,e){a=d.classList;d=e.underlineStrikethrough;var f=!1;if(void 0!==d){var _a2,_a3;ea(d)||(d=d.split(" "),e.underlineStrikethrough=d);var g=b&128&&b&64;c&128&&c&64?(f=!0,g||(_a2=a).add.apply(_a2,d)):g&&(_a3=a).remove.apply(_a3,d);}for(var h in Ba){var _a4,_a5,_a6;g=Ba[h],d=e[h],void 0!==d&&(ea(d)||(d=d.split(" "),e[h]=d),c&g?!f||"underline"!==h&&"strikethrough"!==h?0===(b&g)&&(_a4=a).add.apply(_a4,d):b&g&&(_a5=a).remove.apply(_a5,d):b&g&&(_a6=a).remove.apply(_a6,d));}}
function Ga(a,b,c){var d=b.firstChild,e=q(c)||""!==a?"":"\u2060";var f=c.isComposing()?"\u00A0":"";e=e+a+f;null==d?b.textContent=e:d.nodeValue!==e&&(d.nodeValue=e);d=b.lastChild;null!=d&&(c=c.getParent(),(a=""===a&&null!==c&&1===c.__children.length)&&3===d.nodeType?(d=document.createElement("br"),b.appendChild(d)):a||3===d.nodeType||b.removeChild(d));}var
M=function(_ua3){babelHelpers.inheritsLoose(M,_ua3);M.deserialize=function deserialize(a){return new M(a.__text);};function M(a,b){var _this3;_this3=_ua3.call(this,b)||this;_this3.__text=a;_this3.__type="text";return _this3;}var _proto6=M.prototype;_proto6.clone=function clone(){return new M(this.__text,this.__key);};_proto6.isBold=function isBold(){return 0!==(this.getFlags()&16);};_proto6.isItalic=function isItalic(){return 0!==(this.getFlags()&32);};_proto6.isStrikethrough=function isStrikethrough(){return 0!==(this.getFlags()&64);};_proto6.isUnderline=function isUnderline(){return 0!==(this.getFlags()&128);};_proto6.isCode=function isCode(){return 0!==(this.getFlags()&256);};_proto6.isOverflowed=function isOverflowed(){return 0!==(this.getFlags()&512);};_proto6.isUnmergeable=function isUnmergeable(){return 0!==(this.getFlags()&1024);};_proto6.isSimpleText=function isSimpleText(){return"text"===
this.__type&&!this.isImmutable()&&!this.isInert()&&!this.isSegmented();};_proto6.getTextContent=function getTextContent(a,b){return!a&&this.isInert()||!1===b&&this.isDirectionless()?"":this.getLatest().__text;};_proto6.getTextNodeFormatFlags=function getTextNodeFormatFlags(a,b,c){var d=this.getLatest().__flags;a=Ba[a];return d&a&&!c&&(null===b||0===(b&a))?d^a:null===b||b&a?d|a:d;};_proto6.createDOM=function createDOM(a){var b=this.__flags;var c=b&256?"code":null;var d=Ca(this,b),e=document.createElement(null===c?d:c);var f=e;null!==c&&(f=document.createElement(d),e.appendChild(f));c=f;Ga(this.__text,
c,this);a=a.text;void 0!==a&&Da(d,0,b,c,a);return e;};_proto6.updateDOM=function updateDOM(a,b,c){var d=this.__text;var e=a.__flags;a=this.__flags;var f=e&256?"code":null,g=a&256?"code":null,h=Ca(this,e);var k=Ca(this,a);if((null===f?h:f)!==(null===g?k:g))return!0;if(f===g&&h!==k)return f=b.firstChild,null==f&&l(7),e=g=document.createElement(k),Ga(d,e,this),c=c.text,void 0!==c&&Da(k,0,a,e,c),b.replaceChild(g,f),!1;h=b;null!==g&&null!==f&&(h=b.firstChild,null==h&&l(8));Ga(d,h,this);b=c.text;void 0!==b&&e!==a&&Da(k,e,a,h,b);
return!1;};_proto6.toggleBold=function toggleBold(){return this.setFlags(this.getFlags()^16);};_proto6.toggleItalics=function toggleItalics(){return this.setFlags(this.getFlags()^32);};_proto6.toggleStrikethrough=function toggleStrikethrough(){return this.setFlags(this.getFlags()^64);};_proto6.toggleUnderline=function toggleUnderline(){return this.setFlags(this.getFlags()^128);};_proto6.toggleCode=function toggleCode(){return this.setFlags(this.getFlags()^256);};_proto6.toggleOverflowed=function toggleOverflowed(){return this.setFlags(this.getFlags()^512);};_proto6.toggleUnmergeable=function toggleUnmergeable(){return this.setFlags(this.getFlags()^1024);};_proto6.setTextContent=function setTextContent(a){I();this.isImmutable()&&l(9);var b=this.getWritable();var c=
this.getTopParentBlock();if(null!==c){var d=""===a&&""===c.getTextContent(!1,!1);b.__text=a;b=c.getDirection();null===b||d?(a=ja(a),null!==a&&c.setDirection(a)):null!==b&&""===a&&""===c.getTextContent()&&c.setDirection(null);}else b.__text=a;};_proto6.select=function select(a,b){I();var c=b,d=D(),e=this.getTextContent();b=this.__key;null===b&&l(10);"string"===typeof e?(e=e.length,void 0===a&&(a=e),void 0===c&&(c=e)):c=a=0;if(null===d)return d=c,c=E(),b=new x(new r(b,a),new r(b,d)),b.isDirty=!0,c._selection=b;e=L();e!==d.anchor.key&&
e!==d.focus.key||xa(b);d.setBaseAndExtent(b,a,b,c);return d;};_proto6.spliceText=function spliceText(a,b,c,d){I();this.isImmutable()&&l(11);var e=this.getWritable(),f=e.__text,g=c.length;var h=a;0>h&&(h=g+h,0>h&&(h=0));if(d){d=e.__key;null===d&&l(12);var k=D();null===k&&l(13);a+=g;k.setBaseAndExtent(d,a,d,a);}b=f.slice(0,h)+c+f.slice(h+b);e.setTextContent(b);return e;};_proto6.canInsertTextAtEnd=function canInsertTextAtEnd(){return!0;};_proto6.splitText=function splitText(){var _a7;for(var _len=arguments.length,a=new Array(_len),_key=0;_key<_len;_key++){a[_key]=arguments[_key];}I();this.isImmutable()&&l(14);var b=this.getTextContent(),c=this.__key,d=new Set(a);a=[];var e=b.length,f="";for(var g=
0;g<e;g++){""!==f&&d.has(g)&&(a.push(f),f=""),f+=b[g];}""!==f&&a.push(f);d=a.length;if(0===d)return[];if(a[0]===b)return[this];var h=a[0];e=this.getParentOrThrow();f=e.__key;this.isSegmented()?(b=F(h),b.__parent=f,g=b.__flags,this.remove()):(b=this.getWritable(),b.__text=h,g=b.__flags);var k=D();b=[b];h=h.length;for(var n=1;n<d;n++){var p=a[n],m=p.length;p=F(p).getWritable();p.__flags=g;var t=p.__key;m=h+m;if(null!==k){var v=k.anchor,G=k.focus,K=v.offset,B=G.offset;v.key===c&&K>h&&K<=m&&(v.key=
t,v.offset=K-h,k.isDirty=!0);G.key===c&&B>h&&B<=m&&(G.key=t,G.offset=B-h,k.isDirty=!0);}h=m;p.__parent=f;b.push(p);}a=e.getWritable().__children;c=a.indexOf(c);d=b.map(function(n){return n.__key;});(_a7=a).splice.apply(_a7,[c,1].concat(d));return b;};return M;}(ua);function F(a){if(a===void 0){a="";}return new M(a);}function y(a){return a instanceof M;}var N="",P="",Ha,Q,Ia,Ja,Ka,R,S,La=!1;function Ma(a,b){var c=Ka.get(a);if(null!==b){var d=T(Q,a);b.removeChild(d);}R.has(a)||Q._keyToDOMMap["delete"](a);z(c)&&(a=c.__children,Na(a,0,a.length-1,null));}
function Na(a,b,c,d){for(;b<=c;++b){var e=a[b];void 0!==e&&Ma(e,d);}}
function Oa(a,b,c){var d=R.get(a);void 0===d&&l(36);var e=d.createDOM(Ha);var f=d.__flags,g=f&4;var h=f&1;var k=Q;null===a&&l(41);k=k._keyToDOMMap;e.__outlineInternalRef=a;k.set(a,e);y(d)?e.setAttribute("data-Outline-text","true"):C(d)&&e.setAttribute("data-Outline-decorator","true");if(h||g)e.contentEditable="false";g&&(g=e.style,g.pointerEvents="none",g.userSelect="none",g.setProperty("-webkit-user-select","none"));z(d)?(f&2048?e.dir="ltr":f&4096&&(e.dir="rtl"),Pa(d),a=d.__children,Qa(a,0,
a.length-1,e,null)):(C(d)&&(f=d.decorate(Q),null!==f&&Ra(a,f)),a=d.getTextContent(),N+=a,P+=a);null!==b&&(null!=c?b.insertBefore(e,c):b.appendChild(e));return e;}function Qa(a,b,c,d,e){var f=N;for(N="";b<=c;++b){Oa(a[b],d,e);}d.__outlineTextContent=N;N=f+N;}
function Sa(a,b){var c=Ka.get(a),d=R.get(a);void 0!==c&&void 0!==d||l(37);var e=La||Ja.has(a)||Ia.has(a);var f=T(Q,a);if(c===d&&!e){if(z(c)){var g=f.__outlineTextContent;void 0!==g&&(N+=g,P+=g);}else g=c.getTextContent(),P+=g,N+=g;return f;}if(d.updateDOM(c,f,Ha))return g=Oa(a,null,null),null===b&&l(38),b.replaceChild(g,f),Ma(a,null),g;if(z(c)&&z(d)){if(Pa(d),a=c.__flags,b=d.getLatest().__flags,b&2048?0===(a&2048)&&(f.dir="ltr"):b&4096?0===(a&4096)&&(f.dir="rtl"):(a&2048||a&4096)&&f.removeAttribute("dir"),
a=c.__children,d=d.getLatest().__children,a!==d||e){e=d;d=N;N="";b=a.length;c=e.length;if(1===b&&1===c){if(g=a[0],e=e[0],g===e)Sa(g,f);else{var h=T(Q,g);e=Oa(e,null,null);f.replaceChild(e,h);Ma(g,null);}}else if(0===b)0!==c&&Qa(e,0,c-1,f,null);else if(0===c)0!==b&&(Na(a,0,b-1,null),f.textContent="");else{var p=b-1;--c;var m=f.firstChild,n=0;for(b=0;n<=p&&b<=c;){var k=a[n];var t=e[b];if(k===t)m=Sa(t,f).nextSibling,n++,b++;else{void 0===g&&(g=new Set(a));void 0===h&&(h=new Set(e));var v=h.has(k),
G=g.has(t);v?(G?(k=T(Q,t),k===m?m=Sa(t,f).nextSibling:(null!=m?f.insertBefore(k,m):f.appendChild(k),Sa(t,f)),n++):Oa(t,f,m),b++):(m=T(Q,k).nextSibling,Ma(k,f),n++);}}g=n>p;h=b>c;g&&!h?(g=e[c+1],g=void 0===g?null:Q.getElementByKey(g),Qa(e,b,c,f,g)):h&&!g&&Na(a,n,p,f);}f.__outlineTextContent=N;N=d+N;}}else C(d)&&(g=d.decorate(Q),null!==g&&Ra(a,g)),g=d.getTextContent(),N+=g,P+=g;return f;}function Ta(a){var b=babelHelpers["extends"]({},a._decorators);return a._pendingDecorators=b;}
function Ra(a,b){var c=Q._pendingDecorators;var d=Q._decorators;if(null===c){if(d[a]===b)return;c=Ta(Q);}c[a]=b;}function T(a,b){a=a._keyToDOMMap.get(b);void 0===a&&l(42);return a;}
function Ua(a){var b=L();var c=0,d=0,e,f;null!==S&&(c=S.anchor.offset,d=S.focus.offset,e=S.anchor.key,f=S.focus.key);var g=a[0].getWritable(),h=g.__key;var k=g.getTextContentSize();for(var p=1;p<a.length;p++){var m=a[p],n=m.getTextContent(),t=m.__key;b===t&&xa(h);null!==S&&t===e&&(S.anchor.offset=k+c,S.anchor.key=h);null!==S&&t===f&&(S.focus.offset=k+d,S.focus.key=h);g.spliceText(k,0,n);k+=n.length;m.remove();}null!==S&&(S.isDirty=!0);}
function Pa(a){a=a.getChildren();var b=[],c=null;for(var d=0;d<a.length;d++){var e=a[d];if(!y(e)||"text"!==e.__type||e.isImmutable()||e.isSegmented()||e.isUnmergeable())1<b.length&&Ua(b),b=[],c=null;else{var f=e.__flags;null===c||f===c?b.push(e):(1<b.length&&Ua(b),b=[e]);c=f;}}1<b.length&&Ua(b);}var U=null,V=null,W=!1,ab=!1,bb=!1;function I(){W&&l(17);}function E(){null===U&&l(18);return U;}function la(){null===V&&l(19);return V;}
var cb={getRoot:function getRoot(){return E()._nodeMap.get("root");},getNodeByKey:u,getSelection:D,clearSelection:function clearSelection(){E()._selection=null;},setSelection:function setSelection(a){E()._selection=a;},createNodeFromParse:function createNodeFromParse(a,b){I();var c=la();return ya(a,b,c,null);},markNodeAsDirty:function markNodeAsDirty(a){a.getWritable();},setCompositionKey:xa,getCompositionKey:L};function db(a,b){b=b.getViewModel()._selection;a=a._selection;if(null!==a){if(null===b||a.isDirty||!a.is(b))return!0;}else if(null!==b)return!0;return!1;}
function eb(a,b,c,d,e){var f=U,g=W,h=V;U=a;W=!1;V=e;try{c&&(a._selection=qa(a,e));var G=e._compositionKey;b(cb);if(d){var k=a._nodeMap,p=Array.from(e._viewModel._nodeMap);for(b=0;b<p.length;b++){var _p$b=p[b],B=_p$b[0],H=_p$b[1];y(H)&&k.has(B)&&H.getWritable();}}if(a.hasDirtyNodes()){var m=e._textNodeTransforms;if(0<m.size){var O=a._nodeMap;var n=Array.from(a._dirtyNodes),t=Array.from(m);try{ab=!0;k=O;var v=L();for(p=0;p<n.length;p++){var w=k.get(n[p]);if(void 0!==w&&y(w)&&w.__key!==v&&!A(w)&&w.isAttached()&&
!w.isImmutable()&&!w.isSegmented())for(m=0;m<t.length&&(t[m](w,cb),w.isAttached());m++){;}}}finally{ab=!1;}}var B=Array.from(a._dirtyNodes),H=a._nodeMap;for(v=0;v<B.length;v++){var _O=B[v],_w=H.get(_O);void 0===_w||_w.isAttached()||(z(_w)&&fb(_w,_O,H),H["delete"](_O));}}G!==e._compositionKey&&(a._flushSync=!0);var K=a._selection;if(null!==K){var _B=a._nodeMap,_H=K.focus.key;void 0!==_B.get(K.anchor.key)&&void 0!==_B.get(_H)||l(20);}}catch(G){return G;}finally{U=f,W=g,V=h;}return null;}
function fb(a,b,c){a=a.__children;var d=a.length;for(var e=0;e<d;e++){var f=a[e],g=c.get(f);void 0!==g&&g.__parent===b&&(z(g)&&fb(g,f,c),c["delete"](f));}}
function X(a,b){var c=a._pendingViewModel,d=a._rootElement;if(null!==d&&null!==c){var e=a._viewModel;a._pendingViewModel=null;a._viewModel=c;var f=U,g=W,h=V;V=a;U=c;W=!1;try{var k=c._dirtySubTrees,p=c._dirtyNodes,m=c._isDirty||c.hasDirtyNodes();var ma=c._selection;if(m){Y("mutation",a,null);try{m=ma,P=N="",Q=a,Ha=a._editorThemeClasses,Ia=k,Ja=p,Ka=e._nodeMap,R=c._nodeMap,S=m,La=c._isDirty,Sa("root",null),a._textContent=P,Ha=S=R=Ka=Ja=Ia=Q=void 0;}finally{Y("mutation",a,d);}}var n=window.getSelection();
if(null!==n){e=ma;var Va=n.anchorNode,Wa=n.focusNode,lb=n.anchorOffset,mb=n.focusOffset;if(null===e)ia(a,Va,Wa)&&n.removeAllRanges();else{var t=e.anchor,v=e.focus,G=t.key,K=v.key,B=t.getNode(),H=v.getNode(),O=T(a,G),w=T(a,K),Ea=ka(O),Fa=ka(w);if(null!==Fa&&null!==Ea){var Xa=t.offset,Ya=v.offset,Za=q(B)||""!==B.getTextContent()?Xa:Xa+1,$a=q(H)||""!==H.getTextContent()?Ya:Ya+1;if(lb!==Za||mb!==$a||Va!==Ea||Wa!==Fa)try{n.setBaseAndExtent(Ea,Za,Fa,$a);}catch(_unused2){}}}}}catch(ma){Y("error",a,ma,b);bb||(gb(a),
a._keyToDOMMap.set("root",d),a._pendingViewModel=c,bb=!0,X(a,"ReconcileRecover"),bb=!1);return;}finally{U=f,W=g,V=h;}b=a._decorators;d=a._pendingDecorators||b;f=c._nodeMap;for(var J in d){f.has(J)||(d===b&&(d=Ta(a)),delete d[J]);}J=a._pendingDecorators;null!==J&&(a._decorators=J,a._pendingDecorators=null,Y("decorator",a,J));Y("update",a,c);c=a._deferred;if(0!==c.length){for(J=0;J<c.length;J++){c[J]();}a._deferred=[];}}}
function Y(a,b){a=Array.from(b._listeners[a]);for(var _len2=arguments.length,c=new Array(_len2>2?_len2-2:0),_key2=2;_key2<_len2;_key2++){c[_key2-2]=arguments[_key2];}for(b=0;b<a.length;b++){var _a8;(_a8=a)[b].apply(_a8,c);}}var
hb=function(){function hb(a){this._nodeMap=a;this._selection=null;this._dirtyNodes=new Set();this._dirtySubTrees=new Set();this._flushSync=this._isDirty=!1;}var _proto7=hb.prototype;_proto7.hasDirtyNodes=function hasDirtyNodes(){return 0<this._dirtyNodes.size;};_proto7.isDirty=function isDirty(){return this._isDirty;};_proto7.markDirty=function markDirty(){this._isDirty=!0;};_proto7.getDirtyNodes=function getDirtyNodes(){var a=Array.from(this._dirtyNodes),b=this._nodeMap,c=[];for(var d=0;d<a.length;d++){var e=b.get(a[d]);void 0!==e&&c.push(e);}return c;};_proto7.read=function read(a){var b=U,c=W,d=V;U=this;W=!0;V=null;try{return a(cb);}finally{U=b,W=c,V=d;}};_proto7.stringify=function stringify(a){var b=
this._selection;return JSON.stringify({_nodeMap:Array.from(this._nodeMap.entries()),_selection:null===b?null:{anchor:{key:b.anchor.key,offset:b.anchor.offset},focus:{key:b.focus.key,offset:b.focus.offset}}},null,a);};return hb;}();var Z=function(_Aa){babelHelpers.inheritsLoose(Z,_Aa);Z.deserialize=function deserialize(){return new Z();};function Z(){var _this4;_this4=_Aa.call(this,"root")||this;_this4.__type="root";return _this4;}var _proto8=Z.prototype;_proto8.clone=function clone(){return new Z();};_proto8.isAttached=function isAttached(){return!0;};_proto8.updateDOM=function updateDOM(){return!1;};return Z;}(Aa);function ib(){return new Z();}function va(a){return a instanceof Z;}var
jb=function(_ua4){babelHelpers.inheritsLoose(jb,_ua4);jb.deserialize=function deserialize(){return new jb();};function jb(a){var _this5;_this5=_ua4.call(this,a)||this;_this5.__type="linebreak";return _this5;}var _proto9=jb.prototype;_proto9.getTextContent=function getTextContent(){return"\n";};_proto9.clone=function clone(){return new jb(this.__key);};_proto9.createDOM=function createDOM(){return document.createElement("br");};_proto9.updateDOM=function updateDOM(){return!1;};return jb;}(ua);function A(a){return a instanceof jb;}
function gb(a){var b=ib();b=new Map([["root",b]]);b=new hb(b);var c=a._keyToDOMMap,d=a._rootElement;null!==d&&(d.textContent="");a._viewModel=b;a._pendingViewModel=null;a._compositionKey=null;a._rootElement=null;c.clear();a._textContent="";Y("update",a,a._viewModel);Y("mutation",a,null);}
function kb(a,b,c,d,e){e&&a._deferred.push(e);e=a._pendingViewModel;var f=!1;null===e&&(e=a._pendingViewModel=new hb(new Map(a._viewModel._nodeMap)),f=!0);b=eb(e,b,f,c,a);if(null!==b)return Y("error",a,b,d),b=a._viewModel,b.markDirty(),a._pendingViewModel=b,X(a,"UpdateRecover"),!1;if(!e.hasDirtyNodes()&&!db(e,a))return f&&(a._pendingViewModel=null),!1;e._flushSync?(e._flushSync=!1,X(a,d)):f&&ha(function(){X(a,d);});return!0;}var
nb=function(){function nb(a,b){this._rootElement=null;this._viewModel=a;this._compositionKey=this._pendingViewModel=null;this._deferred=[];this._keyToDOMMap=new Map();this._listeners={decorator:new Set(),error:new Set(),mutation:new Set(),root:new Set(),update:new Set()};this._editorThemeClasses=b;this._textNodeTransforms=new Set();this._nodeTypes=new Map([["text",M],["linebreak",jb],["root",Z]]);this._decorators={};this._pendingDecorators=null;this._textContent="";}var _proto10=nb.prototype;_proto10.isComposing=function isComposing(){return null!=this._compositionKey;};_proto10.registerNodeType=function registerNodeType(a,
b){this._nodeTypes.set(a,b);};_proto10.addListener=function addListener(a,b){var _this6=this;var c=this._listeners[a];c.add(b);var d="root"===a;d&&b(this._rootElement,null);return function(){c["delete"](b);d&&b(null,_this6._rootElement);};};_proto10.addTextNodeTransform=function addTextNodeTransform(a){var _this7=this;this._textNodeTransforms.add(a);kb(this,ca,!0,"addTextNodeTransform");return function(){_this7._textNodeTransforms["delete"](a);};};_proto10.getDecorators=function getDecorators(){return this._decorators;};_proto10.getRootElement=function getRootElement(){return this._rootElement;};_proto10.getTextContent=function getTextContent(){return this._textContent;};_proto10.setRootElement=function setRootElement(a){var b=this._rootElement;a!==b&&(null!==
a&&null===b||gb(this),this._rootElement=a,null!==a&&(a.setAttribute("data-Outline-editor","true"),this._keyToDOMMap.set("root",a),X(this,"setRootElement")),Y("root",this,a,b));};_proto10.getElementByKey=function getElementByKey(a){return this._keyToDOMMap.get(a)||null;};_proto10.getViewModel=function getViewModel(){return this._viewModel;};_proto10.setViewModel=function setViewModel(a){null!==this._pendingViewModel&&X(this,"setViewModel #1");this._pendingViewModel=a;X(this,"setViewModel #2");};_proto10.parseViewModel=function parseViewModel(a){var b=JSON.parse(a);a=new Map();a=new hb(a);var c={originalSelection:b._selection},d=W,
e=V;U=a;W=!1;V=this;try{var f=new Map(b._nodeMap);var g=f.get("root");ya(g,f,this,null,c);}finally{U=a,W=d,V=e;}f=c.remappedSelection||c.originalSelection;f=null===f?null:new x(new r(f.anchor.key,f.anchor.offset),new r(f.focus.key,f.focus.offset));a._selection=f;a._isDirty=!0;return a;};_proto10.update=function update(a,b,c){ab&&l(16);return kb(this,a,!1,b,c);};_proto10.focus=function focus(a){var b=this._rootElement;null!==b&&(b.focus({preventScroll:!0}),b.setAttribute("autocapitalize","off"),this.update(function(c){var d=c.getSelection();null!==d?d.isDirty=
!0:(c=c.getRoot().getLastTextNode(),null!==c&&c.select());},"focus",function(){b.removeAttribute("autocapitalize");a&&a();}));};_proto10.canShowPlaceholder=function canShowPlaceholder(){if(this.isComposing()||""!==this._textContent)return!1;var a=this._viewModel._nodeMap,b=a.get("root").__children,c=b.length;if(1<c)return!1;for(var e=0;e<c;e++){var d=a.get(b[e]);if(z(d)){if("paragraph"!==d.__type)return!1;d=d.__children;for(var f=0;f<d.length;f++){var g=a.get(d[f]);if(!y(g))return!1;}}}return!0;};return nb;}();exports.BlockNode=Aa;exports.DecoratorNode=za;
exports.RootNode=Z;exports.TextNode=M;exports.createEditor=function(a){var b=ib();b=new Map([["root",b]]);b=new hb(b);return new nb(b,a||{});};exports.createLineBreakNode=function(){return new jb();};exports.createRootNode=ib;exports.createTextNode=F;exports.isBlockNode=z;exports.isDecoratorNode=C;exports.isLineBreakNode=A;exports.isRootNode=va;exports.isTextNode=y;}),null);
/**
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
  *
  * @noflow
  * @nolint
  * @preventMunge
  * @preserve-invariant-messages
  * @generated
  * @preserve-whitespace
  * @fullSyntaxTransform
  */__d("OutlineParagraphNode.prod",["Outline"],(function $module_OutlineParagraphNode_prod(global,require,requireDynamic,requireLazy,module,exports){

"use strict";var d=function(_b$BlockNode){babelHelpers.inheritsLoose(d,_b$BlockNode);d.deserialize=function deserialize(){return new d();};function d(a){var _this;_this=_b$BlockNode.call(this,a)||this;_this.__type="paragraph";return _this;}var _proto=d.prototype;_proto.clone=function clone(){return new d(this.__key);};_proto.createDOM=function createDOM(a){var c=document.createElement("p");a=a.paragraph;void 0!==a&&(c.className=a);return c;};_proto.updateDOM=function updateDOM(){return!1;};_proto.insertNewAfter=function insertNewAfter(){var a=e(),c=this.getDirection();a.setDirection(c);this.insertAfter(a);return a;};return d;}(require("Outline").BlockNode);function e(){return new d();}exports.ParagraphNode=d;exports.createParagraphNode=e;
exports.isParagraphNode=function(a){return a instanceof d;};}),null);
/**
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
  *
  * @noflow
  * @nolint
  * @preventMunge
  * @preserve-invariant-messages
  * @generated
  * @preserve-whitespace
  * @fullSyntaxTransform
  */__d("useOutlineDecorators.prod",["ReactDOMComet","react"],(function $module_useOutlineDecorators_prod(global,require,requireDynamic,requireLazy,module,exports){

"use strict";var c_react;var g=c_react||(c_react=require("react"));module.exports=function(a){var _g$useState=g.useState(function(){return a.getDecorators();}),e=_g$useState[0],k=_g$useState[1];g.useEffect(function(){return a.addListener("decorator",function(c){require("ReactDOMComet").flushSync(function(){k(c);});});},[a]);return g.useMemo(function(){var c=[],h=Object.keys(e);for(var f=0;f<h.length;f++){var b=h[f];var l=e[b];b=a.getElementByKey(b);null!==b&&c.push(require("ReactDOMComet").createPortal(l,b));}return c;},[e,a]);};}),null);
/**
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
  *
  * @noflow
  * @nolint
  * @preventMunge
  * @preserve-invariant-messages
  * @generated
  * @preserve-whitespace
  * @fullSyntaxTransform
  */__d("useOutlinePlainText.prod",["Outline","OutlineHashtagNode","OutlineHistoryHelpers","OutlineParagraphNode","react"],(function $module_useOutlinePlainText_prod(global,require,requireDynamic,requireLazy,module,exports){

"use strict";var c_react;var p=c_react||(c_react=require("react"));function y(a,b){return"selectionchange"===a||"keyup"===a||"pointerup"===a||"pointercancel"===a?b.ownerDocument:b;}
function aa(a,b,c){p.useEffect(function(){if(!c){var d=[],e=[];var _loop=function _loop(g){var _a$g=a[g],f=_a$g[0],m=_a$g[1],h=function h(l){m(l,b);};d.push(function(l){y(f,l).addEventListener(f,h);});e.push(function(l){y(f,l).removeEventListener(f,h);});};for(var g=0;g<a.length;g++){_loop(g);}return b.addListener("root",function(g,f){null!==f&&e.forEach(function(m){return m(f);});null!==g&&d.forEach(function(m){return m(g);});});}},[b,a,c]);}var A="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement,ba=A&&"documentMode"in document?document.documentMode:null;A&&/Win/.test(navigator.platform);
A&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream;var B=A&&/Mac|iPod|iPhone|iPad/.test(navigator.platform);A&&/^(?!.*Seamonkey)(?=.*Firefox).*/i.test(navigator.userAgent);var C=A&&/Version\/[\d\.]+.*Safari/.test(navigator.userAgent);A&&/^(?=.*Chrome).*/i.test(navigator.userAgent);var F=A&&"InputEvent"in window&&!ba?"getTargetRanges"in new window.InputEvent("input"):!1;function G(a){return a.isImmutable()||a.isInert();}
function H(a){throw Error("Minified Outline error #"+a+"; see codes.json for the full message or "+"use the non-minified dev environment for full errors and additional helpful warnings.");}function I(a){a.isCollapsed()&&J(a,!0,"lineboundary",!1);K(a);}function L(a){a.isCollapsed()&&J(a,!1,"lineboundary",!1);K(a);}function M(a){a.isCollapsed()&&J(a,!0,"word",!1);K(a);}function N(a){a.isCollapsed()&&J(a,!1,"word",!1);K(a);}
function fa(a,b){var c=a.anchor.getNode(),d=a.focus.getNode();if(c===d){var e=a.anchor.offset,g=a.focus.offset;var f=e<g;d=f?e:g;g=f?g:e;e=g-1;d!==e&&(c=c.getTextContent().slice(d,g),/[\uD800-\uDBFF][\uDC00-\uDFFF]/g.test(c)||(b?a.focus.offset=e:a.anchor.offset=e));}}
function ha(a){var b=a.anchor.getNode(),c=b.getTextContent();a=a.anchor.offset;if(0===a&&b.isSimpleText()){if(a=b.getPreviousSibling(),require("Outline").isTextNode(a)&&require("OutlineHashtagNode").isHashtagNode(a)){a.select();var d=a.getTextContent();a.setTextContent(d+c);b.remove();}}else require("OutlineHashtagNode").isHashtagNode(b)&&a===b.getTextContentSize()&&(a=b.getNextSibling(),require("Outline").isTextNode(a)&&a.isSimpleText()&&(d=a.getTextContent(),b.setTextContent(c+d),a.remove()));}
function O(a,b){if(a.isCollapsed())if(J(a,b,"character",!1),!a.isCollapsed()){var c=a.focus.getNode();var d=a.anchor.getNode();if(c.isSegmented()){P(c,b);return;}if(d.isSegmented()){P(d,b);return;}fa(a,b);}else if(b&&(b=a.anchor.getNode().getParentOrThrow(),c=b.getType(),0===a.anchor.offset&&"paragraph"!==c)){var _d=require("OutlineParagraphNode").createParagraphNode();b.getChildren().forEach(function(e){return _d.append(e);});"listitem"===c?(a=b.getParentOrThrow(),1===a.getChildrenSize()?a.replace(_d):(a.insertBefore(_d),b.remove())):b.replace(_d);
return;}K(a);ha(a);}function P(a,b){var c=a.getTextContent().split(/\s/g);b?c.pop():c.shift();c=c.join(" ");var d=b?a.getNextSibling():a.getPreviousSibling();require("Outline").isTextNode(d)&&(""===c?a.remove():a.setTextContent(c),b?d.select(0,0):d.select());}
function J(a,b,c,d){var e=window.getSelection(),g=a.focus.getNode();var f=a.focus.offset,m=b?g.getPreviousSibling():g.getNextSibling();if(!b||0!==f||null!==m||null!==g.getParentOrThrow().getPreviousSibling()){var h=g.getTextContentSize();g=b?0===f&&""===g.getTextContent()&&!G(g):f===h&&require("Outline").isTextNode(m)&&!G(m)&&""===m.getTextContent();e.modify(d?"move":"extend",b?"backward":"forward",c);g&&"character"===c&&e.modify(d?"move":"extend",b?"backward":"forward",c);0<e.rangeCount&&(b=e.getRangeAt(0),a.applyDOMRange(b),
d||e.anchorNode===b.startContainer&&e.anchorOffset===b.startOffset||(d=a.anchor,a=a.focus,e=d.key,b=d.offset,d.key=a.key,d.offset=a.offset,a.key=e,a.offset=b));}}function K(a){Q(a,"");}function R(a,b){var c=require("Outline").createLineBreakNode();b?S(a,[c],!0):S(a,[c])&&c.selectNext(0,0);}
function S(a,b,c){var _a;a.isCollapsed()||K(a);var d=a.anchor.offset,e=a.anchor.getNode(),g=e.getTextContent().length;a=[];var f=e.getNextSiblings(),m=e.getTopParentBlockOrThrow();if(0===d)d=require("Outline").createTextNode(""),e.insertBefore(d),a.push(e);else if(d===g)d=e;else{if(G(e))return!1;var _e$splitText=e.splitText(d);d=_e$splitText[0];e=_e$splitText[1];a.push(e);}e=d;(_a=a).push.apply(_a,f);for(f=0;f<b.length;f++){g=b[f],require("Outline").isBlockNode(g)&&require("Outline").isTextNode(d)&&(d=m),d.insertAfter(g),d=g;}if(require("Outline").isBlockNode(d)){if(b=d.getLastTextNode(),require("Outline").isTextNode(b)||H(5),c?e.select():b.select(),
0!==a.length)for(c=b,b=0;b<a.length;b++){m=a[b],c.insertAfter(m),c=m;}}else require("Outline").isTextNode(d)?c?e.select():d.select():(a=d.getPreviousSibling(),require("Outline").isTextNode(a)&&a.select());return!0;}function T(a,b){var c=b.split(/\r?\n/);if(1===c.length)Q(a,b);else{b=[];var d=c.length;for(var e=0;e<d;e++){b.push(require("Outline").createTextNode(c[e])),e!==d-1&&b.push(require("Outline").createLineBreakNode());}S(a,b);}}
function Q(a,b){var c=a.getNodes(),d=c.length,e=a.anchor.offset,g=a.focus.offset,f=c[0];require("Outline").isTextNode(f)||H(6);var m=f.getTextContent().length;var h=f===a.anchor.getNode();if(f.isSegmented()||!f.canInsertTextAtEnd())if(a.isCollapsed()&&g===m){var l=f.getNextSibling();require("Outline").isTextNode(l)||(l=require("Outline").createTextNode(),f.insertAfter(l));l.select(0,0);f=l;if(""!==b){Q(a,b);return;}}else f.isSegmented()&&(l=require("Outline").createTextNode(f.getTextContent()),f.replace(l,!0),f=l);var n;if(1===d)n=e>g?g:e,e=e>g?e:g,G(f)?(c=require("Outline").createTextNode(b),
f.replace(c),c.select()):(f.spliceText(n,e-n,b,!0),f.isComposing()&&(a.anchor.offset-=b.length));else{--d;var k=c[d];l=new Set(f.getParents());var r=new Set(k.getParents());var q=f.getParent();var t=k.getParent();var E=!1,D=!1;n=h?e:g;e=h?g:e;e===k.getTextContentSize()?(k.remove(),D=!0):G(k)?(D=!0,e=require("Outline").createTextNode(""),k.replace(e)):require("Outline").isTextNode(k)&&(k.isSegmented()&&(g=require("Outline").createTextNode(k.getTextContent()),k.replace(g,!0),k=g),k.spliceText(0,e,"",!1));if(require("Outline").isBlockNode(q)&&require("Outline").isBlockNode(t)){e=
t.getChildren();g=new Set(c);q=q.is(t);for(h=e.length-1;0<=h;h--){var z=e[h];if(z.is(f))break;z.isAttached()&&(!g.has(z)||z.is(k)?q||f.insertAfter(z):z.remove());}if(!q)for(k=t;null!==k;){0===k.getChildrenSize()&&r["delete"](k),k=k.getParent();}}G(f)?(E=!0,a=require("Outline").createTextNode(b),f.replace(a),a.select()):(f.spliceText(n,m-n,b,!0),f.isComposing()&&(a.anchor.offset-=b.length));for(f=1;f<d;f++){a=c[f],!E&&l.has(a)||!D&&r.has(a)||a.remove();}}}var U=!1;
function V(a,b){b=b.__outlineInternalRef;return void 0!==b?a.getNodeByKey(b):null;}function W(a,b){for(;null!=b;){var c=V(a,b);if(null!==c)return c;b=b.parentNode;}return null;}function ia(a){return a.getViewModel().read(function(b){return b.getSelection();});}function X(a,b,c){var d=a.anchor;var e=d.offset,g=a.focus.offset;d=d.getNode().getTextContentSize();c=c?2>e||2>g:e>d-2||g>d-2;return a.isCollapsed()?b||c:b&&c;}function ja(a){a.preventDefault();}
function Y(a,b){a.preventDefault();b.update(function(c){var d=a.clipboardData;c=c.getSelection();if(null!==c&&null!=d){var e=window.getSelection();if(!e.isCollapsed){var g=e.getRangeAt(0);g&&(e=document.createElement("div"),g=g.cloneContents(),e.appendChild(g),d.setData("text/html",e.innerHTML));d.setData("text/plain",c.getTextContent());}}},"onCopyForPlainText");}function ka(a,b,c){return b.isSegmented()||a.isCollapsed()&&(!c||b.getTextContentSize()===a.anchor.offset)&&!b.canInsertTextAtEnd();}
function la(a,b,c){var d=W(b,a);if(require("Outline").isTextNode(d)&&!d.isDirty()){a=a.nodeValue;var m=a.replace("\u2060","");d.isComposing()&&"\u00A0"===m[m.length-1]&&(m=m.slice(0,-1));if(m!==d.getTextContent()){var e=d;G(e)?(b.markNodeAsDirty(e),e=!0):e=!1;if(!e)if(c.isComposing()&&!d.isComposing())b.markNodeAsDirty(d);else{c=b.getSelection();e=window.getSelection();var g=null===e||0===e.rangeCount?null:e.getRangeAt(0);if(null===e||null===c||null===g)d.setTextContent(m);else{var f=d.getTextContent();c.applyDOMRange(g);
g=d.getKey();!F&&null!==c&&c.anchor.key===g&&0===m.indexOf(f)&&ka(c,d,!1)?(a=m.slice(f.length),b.markNodeAsDirty(d),c.anchor.offset-=a.length,Q(c,a)):(d.isSegmented()&&(b=require("Outline").createTextNode(f),d.replace(b,!0),d=b),d.setTextContent(m),c.isCollapsed()&&c.anchor.key===g&&"\u2060"===a[0]&&(b=e.focusOffset-1,d.select(b,b)));}}}}}
function ma(a,b){var c=a.inputType;"deleteCompositionText"!==c&&"insertCompositionText"!==c&&b.update(function(d){var e=d.getSelection();if(null!==e)if("deleteContentBackward"===c)d.setCompositionKey(null),a.preventDefault(),O(e,!0);else{var g=a.data;if(e.isCollapsed()&&a.getTargetRanges){var f=a.getTargetRanges()[0];f&&e.applyDOMRange(f);}f=a.inputType;var m=e.anchor,h=e.focus;"insertText"!==f&&"insertReplacementText"!==f||0!==m.offset||1!==h.offset||m.key!==h.key?f=!1:(f=a.dataTransfer,f=". "===(null!=
f?f.getData("text/plain"):a.data));if(f)a.preventDefault(),Q(e,"  ");else{f=e.anchor;m=e.focus;h=f.getNode();var l=m.getNode();if("insertText"===c)"\n"===g?(a.preventDefault(),R(e)):"\n\n"===g?(a.preventDefault(),R(e),R(e)):null==g&&a.dataTransfer?(g=a.dataTransfer.getData("text/plain"),a.preventDefault(),T(e,g)):null!=g&&(f.key!==m.key||ka(e,h,!0)||1<g.length)&&(a.preventDefault(),Q(e,g));else switch(a.preventDefault(),c){case"insertFromComposition":g&&(d.setCompositionKey(null),Q(e,g));break;case"insertLineBreak":case"insertParagraph":d.setCompositionKey(null);
R(e);break;case"insertFromYank":case"insertFromDrop":case"insertReplacementText":case"insertFromPaste":d=a.dataTransfer;null!=d?(g=d.getData("text/plain"),null!=g&&T(e,g)):g&&Q(e,g);break;case"deleteByComposition":h===l&&G(h)&&G(l)||K(e);break;case"deleteByDrag":case"deleteByCut":K(e);break;case"deleteContent":O(e,!1);break;case"deleteWordBackward":M(e);break;case"deleteWordForward":N(e);break;case"deleteHardLineBackward":case"deleteSoftLineBackward":I(e);break;case"deleteContentForward":case"deleteHardLineForward":case"deleteSoftLineForward":L(e);}}}},
"onBeforeInputForPlainText");}
function na(a,b,c){a.update(function(d){var e=!1;for(var g=0;g<b.length;g++){var f=b[g],m=f.type,h=f.target,l=W(d,h);if(!require("Outline").isDecoratorNode(l))if("characterData"===m)3===h.nodeType&&la(h,d,a);else if("childList"===m){e=!0;m=f.addedNodes;l=f.removedNodes;f=f.nextSibling;for(var n=0;n<l.length;n++){var q=l[n];var k=V(d,q);var r=f;null!==k&&(k=k.getNextSibling(),null!==k&&(k=k.getKey(),k=a.getElementByKey(k),null!==k&&null!==k.parentNode&&(r=k)));if(null!=r)for(;null!=r;){k=r.parentNode;if(k===h){h.insertBefore(q,
r);break;}r=k;}else h.appendChild(q);}for(h=0;h<m.length;h++){l=m[h],f=V(d,l),n=l.parentNode,null!=n&&null===f&&n.removeChild(l);}}}g=c.takeRecords();if(0<g.length){for(m=0;m<g.length;m++){for(h=g[m].addedNodes,l=0;l<h.length;l++){f=h[l],n=f.parentNode,null!=n&&"BR"===f.nodeName&&n.removeChild(f);}}c.takeRecords();}e&&(e=ia(a),null!==e&&(e=e.clone(),e.isDirty=!0,d.setSelection(e)));},"onMutation");}
function oa(a){p.useEffect(function(){var b=function b(c){var d=a.getRootElement();if(document.activeElement===d&&(d=c.data,"string"===typeof d)){try{var e=JSON.parse(d);}catch(g){return;}if(e&&"nuanria_messaging"===e.protocol&&"request"===e.type&&(e=e.payload)&&"makeChanges"===e.functionId&&(e=e.args)){var _e=e,g=_e[0],f=_e[1],m=_e[2],h=_e[3],l=_e[4];a.update(function(n){n=n.getSelection();if(null!==n){var k=n.anchor;var q=k.key,r=0,t=0;0<=g&&0<=f&&(r=g,t=g+f,n.setBaseAndExtent(q,r,q,t));if(r!==t||""!==m)T(n,m),q=k.key;r=h;t=h+l;k=k.getNode().getTextContentSize();
r=r>k?k:r;t=t>k?k:t;n.setBaseAndExtent(q,r,q,t);c.stopImmediatePropagation();}},"useOutlineDragonSupport");}}};window.addEventListener("message",b,!0);return function(){window.removeEventListener("message",b,!0);};},[a]);}
function pa(a,b){if(require("OutlineHistoryHelpers").viewModelsWithoutHistory.has(b))return require("OutlineHistoryHelpers").viewModelsWithoutHistory["delete"](b),0;if(null===a)return 1;var c=b._selection;var d=a._selection;if(!b.hasDirtyNodes())return null===d&&null!==c?0:2;b=b.getDirtyNodes();if(1===b.length&&(b=b[0],a=a._nodeMap.get(b.__key),void 0!==a&&require("Outline").isTextNode(a)&&require("Outline").isTextNode(b)&&a.__flags===b.__flags)){a=a.__text;if(""===a)return 1;a=b.__text.length-a.length;if(0===a)return 0;if(-1===a||1===a){if(null==c||null===d)return 0;c=c.anchor;if(c.key!==d.anchor.key)return 1;
if(d.anchor.offset===c.offset-1)return 0;}}return 1;}
function qa(a){var b=p.useMemo(function(){return{current:null,redoStack:[],undoStack:[]};},[]);p.useEffect(function(){var c=a.getRootElement();if(null!==c){var d=function d(){var h=b.redoStack;var l=b.undoStack,n=l.length;if(0!==n){var k=b.current;null!==k&&(1===n||k.hasDirtyNodes()||(k=l.pop()),h.push(k));h=l.pop();b.current=h;h.markDirty();a.setViewModel(h);}},e=function e(){var h=b.redoStack;var l=b.undoStack;if(0!==h.length){var n=b.current;null!==n&&l.push(n);h=h.pop();b.current=h;h.markDirty();a.setViewModel(h);}},g=
function g(h){if(!a.isComposing())if(90===h.keyCode&&!h.shiftKey&&(B?h.metaKey:h.ctrlKey))h.preventDefault(),d();else{{var n=h.keyCode,k=h.shiftKey,q=h.ctrlKey;var l=B?90===n&&h.metaKey&&k:89===n&&q||90===n&&q&&k;}l&&(h.preventDefault(),e());}},f=function f(h){var l=h.inputType;"historyUndo"===l?(h.preventDefault(),d()):"historyRedo"===l&&(h.preventDefault(),e());},m=a.addListener("update",function(h){var l=b.current,n=b.redoStack,k=b.undoStack;if(h!==l){if(!h.isDirty()){var q=pa(l,h);if(1===q)0!==n.length&&(b.redoStack=
[]),null!==l&&k.push(l);else if(2===q)return;}b.current=h;}});c.addEventListener("keydown",g);c.addEventListener("beforeinput",f);return function(){m();c.removeEventListener("keydown",g);c.removeEventListener("beforeinput",f);};}},[b,a]);return p.useCallback(function(){b.undoStack=[];b.redoStack=[];b.current=null;},[b]);}
function ra(a){a.update(function(b){var c=b.getRoot();if(null===c.getFirstChild()){var d=require("OutlineParagraphNode").createParagraphNode(),e=require("Outline").createTextNode();c.append(d.append(e));null!==b.getSelection()&&e.select();}},"initEditor");}function sa(a,b){a.update(function(c){var d=c.getRoot().getFirstChild();if(require("OutlineParagraphNode").isParagraphNode(d)){d.clear();var e=require("Outline").createTextNode();d.append(e);null!==c.getSelection()&&e.select();}},"clearEditor",b);}
var Z=[["selectionchange",function(a,b){a=window.getSelection();var c=b.getRootElement();c&&!c.contains(a.anchorNode)||b.update(function(){},"onSelectionChange");}],["keydown",function(a,b){U="Unidentified"===a.key&&229===a.keyCode;b.isComposing()||b.update(function(c){c=c.getSelection();if(null!==c){var d=a.shiftKey;var e="rtl"===c.anchor.getNode().getTopParentBlockOrThrow().getDirection();if(37!==a.keyCode||a.ctrlKey||a.metaKey||a.altKey){if(39!==a.keyCode||a.ctrlKey||a.metaKey||a.altKey){var g;(g=13===a.keyCode&&
!a.shiftKey)||(g=13===a.keyCode&&a.shiftKey);if(g)a.preventDefault(),R(c);else if(B&&a.ctrlKey&&79===a.keyCode)a.preventDefault(),R(c,!0);else{var f=a.keyCode,m=a.altKey,h=a.metaKey,l=a.ctrlKey;if(B?m||h?0:8===a.keyCode||72===f&&l:l||m||h?0:8===a.keyCode)a.preventDefault(),O(c,!0);else{var n=a.keyCode,k=a.shiftKey,q=a.altKey,r=a.metaKey,t=a.ctrlKey;if(B?k||q||r?0:46===a.keyCode||68===n&&t:t||q||r?0:46===a.keyCode)a.preventDefault(),O(c,!1);else{var E=a.altKey,D=a.metaKey,z=a.ctrlKey;if(B?z||D?0:37===a.keyCode&&
E:E||D?0:37===a.keyCode&&z){if(C||X(c,d,!e))a.preventDefault(),J(c,!e,"word",!d);}else{var ca=a.altKey,da=a.metaKey,ea=a.ctrlKey;if(B?ea||da?0:39===a.keyCode&&ca:ca||da?0:39===a.keyCode&&ea){if(C||X(c,d,e))a.preventDefault(),J(c,e,"word",!d);}else 8===a.keyCode&&(B?a.altKey:a.ctrlKey)?(a.preventDefault(),M(c)):46===a.keyCode&&(B?a.altKey:a.ctrlKey)?(a.preventDefault(),N(c)):B&&a.metaKey&&8===a.keyCode?(a.preventDefault(),I(c)):B&&a.metaKey&&46===a.keyCode?(a.preventDefault(),L(c)):65===a.keyCode&&(B?
a.metaKey:a.ctrlKey)&&(a.preventDefault(),e=c.anchor.getNode().getTopParentBlockOrThrow().getParentOrThrow(),d=e.getFirstTextNode(),e=e.getLastTextNode(),null!==d&&null!==e&&c.setBaseAndExtent(d.getKey(),0,e.getKey(),e.getTextContentSize()));}}}}}else X(c,d,e)&&(a.preventDefault(),J(c,e,"character",!d));}else X(c,d,!e)&&(a.preventDefault(),J(c,!e,"character",!d));}},"onKeyDownForPlainText");}],["compositionstart",function(a,b){b.update(function(c){var d=c.getSelection();null===d||b.isComposing()||(c.setCompositionKey(d.anchor.key),
null==a.data||U||Q(d," "));},"onCompositionStart");}],["compositionend",function(a,b){b.update(function(c){var d=window.getSelection();d=null===d?null:d.anchorNode;null!==d&&3===d.nodeType&&la(d,c,b);c.setCompositionKey(null);},"onCompositionEnd");}],["cut",function(a,b){Y(a,b);b.update(function(c){c=c.getSelection();null!==c&&K(c);},"onCutForPlainText");}],["copy",Y],["dragstart",function(a){a.preventDefault();}],["paste",function(a,b){a.preventDefault();b.update(function(c){c=c.getSelection();var d=a.clipboardData;null!=d&&null!==
c&&(d=d.getData("text/plain"),null!=d&&T(c,d));},"onPasteForPlainText");}]];F?Z.push(["beforeinput",ma]):Z.push(["drop",ja]);
module.exports=function(a,b){p.useEffect(function(){var d=a.addListener("root",function(f){null!==f&&(ra(a),a.registerNodeType("paragraph",require("OutlineParagraphNode").ParagraphNode));}),e=new MutationObserver(function(f){na(a,f,e);}),g=a.addListener("mutation",function(f){null===f?e.disconnect():e.observe(f,{childList:!0,subtree:!0,characterData:!0});});return function(){g();d();};},[a]);aa(Z,a,b);oa(a);var c=qa(a);return p.useCallback(function(d){sa(a,function(){c();d&&d();});},[c,a]);};}),null);